var Sijssies=function(e){"use strict";"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function r(e,t){return e(t={exports:{}},t.exports),t.exports}var y=t(r(function(e){var t;"undefined"!=typeof self&&self,t=function(){return n={},o.m=r={"./src/attributes.js":function(e,t,r){t.__esModule=!0,t.createAttribsFromArrays=c,t.createBuffersFromArrays=function(t,r){var n={};Object.keys(r).forEach(function(e){n[e]=l(t,r[e],e)}),r.indices?(n.numElements=r.indices.length,n.elementType=m.getGLTypeForTypedArray(g(r.indices),"indices")):n.numElements=function(e){var t,r;for(r=0;r<f.length&&!((t=f[r])in e);++r);r===f.length&&(t=Object.keys(e)[0]);var n=e[t],o=u(n).length,a=E(n,t),i=o/a;if(0<o%a)throw"numComponents "+a+" not correct for length "+o;return i}(r);return n},t.createBufferFromArray=l,t.createBufferFromTypedArray=v,t.createBufferInfoFromArrays=function(e,t,r){var n=c(e,t),o=Object.assign({},r||{});o.attribs=Object.assign({},r?r.attribs:{},n);var a=t.indices;if(a){var i=g(a,"indices");o.indices=v(e,i,e.ELEMENT_ARRAY_BUFFER),o.numElements=i.length,o.elementType=m.getGLTypeForTypedArray(i)}else o.numElements||(o.numElements=function(e,t){var r,n;for(n=0;n<f.length&&!((r=f[n])in t)&&!((r=d.attribPrefix+r)in t);++n);n===f.length&&(r=Object.keys(t)[0]);var o=t[r];e.bindBuffer(e.ARRAY_BUFFER,o.buffer);var a=e.getBufferParameter(e.ARRAY_BUFFER,e.BUFFER_SIZE);e.bindBuffer(e.ARRAY_BUFFER,null);var i=function(e,t){return t!==e.BYTE&&t!==e.UNSIGNED_BYTE?t!==e.SHORT&&t!==e.UNSIGNED_SHORT?t!==e.INT&&t!==e.UNSIGNED_INT&&t!==e.FLOAT?0:4:2:1}(e,o.type),u=a/i,s=o.numComponents||o.size,c=u/s;if(c%1==0)return c;throw"numComponents "+s+" not correct for length "+length}(e,o.attribs));return o},t.setAttribInfoBufferFromArray=function(e,t,r,n){r=g(r),void 0!==n?(e.bindBuffer(e.ARRAY_BUFFER,t.buffer),e.bufferSubData(e.ARRAY_BUFFER,n,r)):i(e,e.ARRAY_BUFFER,t.buffer,r,t.drawType)},t.setAttributePrefix=function(e){d.attribPrefix=e},t.setAttributeDefaults_=function(e){a.copyExistingProperties(e,d)},t.getNumComponents_=E,t.getArray_=u;var m=n(r("./src/typedarrays.js")),a=n(r("./src/helper.js"));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}var d={attribPrefix:""};function i(e,t,r,n,o){e.bindBuffer(t,r),e.bufferData(t,n,o||e.STATIC_DRAW)}function v(e,t,r,n){if(a.isBuffer(e,t))return t;r=r||e.ARRAY_BUFFER;var o=e.createBuffer();return i(e,r,o,t,n),o}function y(e){return"indices"===e}function u(e){return e.length?e:e.data}var o=/coord|texture/i,s=/color|colour/i;function b(e,t){var r;if(0<t%(r=o.test(e)?2:s.test(e)?4:3))throw"Can not guess numComponents for attribute '"+e+"'. Tried "+r+" but "+t+" values is not evenly divisible by "+r+". You should specify it.";return r}function E(e,t){return e.numComponents||e.size||b(t,u(e).length)}function g(e,t){if(m.isArrayBuffer(e))return e;if(m.isArrayBuffer(e.data))return e.data;Array.isArray(e)&&(e={data:e});var r=e.type;return r||(r=y(t)?Uint16Array:Float32Array),new r(e.data)}function c(l,p){var h={};return Object.keys(p).forEach(function(e){if(!y(e)){var t=p[e],r=t.attrib||t.name||t.attribName||d.attribPrefix+e;if(t.value){if(!Array.isArray(t.value)&&!m.isArrayBuffer(t.value))throw new Error("array.value is not array or typedarray");h[r]={value:t.value}}else{var n,o,a,i;if(t.buffer&&t.buffer instanceof WebGLBuffer)n=t.buffer,i=t.numComponents||t.size,o=t.type,a=t.normalize;else if("number"==typeof t||"number"==typeof t.data){var u=t.data||t,s=t.type||Float32Array,c=u*s.BYTES_PER_ELEMENT;o=m.getGLTypeForTypedArrayType(s),a=void 0!==t.normalize?t.normalize:function(e){return e===Int8Array||e===Uint8Array}(s),i=t.numComponents||t.size||b(e,u),n=l.createBuffer(),l.bindBuffer(l.ARRAY_BUFFER,n),l.bufferData(l.ARRAY_BUFFER,c,t.drawType||l.STATIC_DRAW)}else{var f=g(t,e);n=v(l,f,void 0,t.drawType),o=m.getGLTypeForTypedArray(f),a=void 0!==t.normalize?t.normalize:function(e){return e instanceof Int8Array||e instanceof Uint8Array}(f),i=E(t,e)}h[r]={buffer:n,numComponents:i,type:o,normalize:a,stride:t.stride||0,offset:t.offset||0,divisor:void 0===t.divisor?void 0:t.divisor,drawType:t.drawType}}}}),l.bindBuffer(l.ARRAY_BUFFER,null),h}var f=["position","positions","a_position"];function l(e,t,r){var n="indices"===r?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER;return v(e,g(t,r),n)}},"./src/draw.js":function(e,t,r){t.__esModule=!0,t.drawBufferInfo=c,t.drawObjectList=function(a,e){var i=null,u=null;e.forEach(function(e){if(!1!==e.active){var t=e.programInfo,r=e.vertexArrayInfo||e.bufferInfo,n=!1,o=void 0===e.type?a.TRIANGLES:e.type;t!==i&&(i=t,a.useProgram(t.program),n=!0),!n&&r===u||(u&&u.vertexArrayObject&&!r.vertexArrayObject&&a.bindVertexArray(null),u=r,s.setBuffersAndAttributes(a,t,r)),s.setUniforms(t,e.uniforms),c(a,r,o,e.count,e.offset,e.instanceCount)}}),u.vertexArrayObject&&a.bindVertexArray(null)};var s=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r("./src/programs.js"));function c(e,t,r,n,o,a){r=void 0===r?e.TRIANGLES:r;var i=t.indices,u=t.elementType,s=void 0===n?t.numElements:n;o=void 0===o?0:o,u||i?void 0!==a?e.drawElementsInstanced(r,s,void 0===u?e.UNSIGNED_SHORT:t.elementType,o,a):e.drawElements(r,s,void 0===u?e.UNSIGNED_SHORT:t.elementType,o):void 0!==a?e.drawArraysInstanced(r,o,s,a):e.drawArrays(r,o,s)}},"./src/framebuffers.js":function(e,t,r){t.__esModule=!0,t.bindFramebufferInfo=function(e,t,r){r=r||e.FRAMEBUFFER,t?(e.bindFramebuffer(r,t.framebuffer),e.viewport(0,0,t.width,t.height)):(e.bindFramebuffer(r,null),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight))},t.createFramebufferInfo=function(a,e,i,u){var s=a.FRAMEBUFFER,t=a.createFramebuffer();a.bindFramebuffer(s,t),i=i||a.drawingBufferWidth,u=u||a.drawingBufferHeight;var c=0,f={framebuffer:t,attachments:[],width:i,height:u};return(e=e||m).forEach(function(e){var t=e.attachment,r=e.format,n=function(e){return d[e]}(r);if(n||(n=h+c++),!t)if(function(e){return v[e]}(r))t=a.createRenderbuffer(),a.bindRenderbuffer(a.RENDERBUFFER,t),a.renderbufferStorage(a.RENDERBUFFER,r,i,u);else{var o=Object.assign({},e);o.width=i,o.height=u,void 0===o.auto&&(o.auto=!1,o.min=o.min||o.minMag||a.LINEAR,o.mag=o.mag||o.minMag||a.LINEAR,o.wrapS=o.wrapS||o.wrap||a.CLAMP_TO_EDGE,o.wrapT=o.wrapT||o.wrap||a.CLAMP_TO_EDGE),t=l.createTexture(a,o)}if(p.isRenderbuffer(a,t))a.framebufferRenderbuffer(s,n,a.RENDERBUFFER,t);else{if(!p.isTexture(a,t))throw"unknown attachment type";a.framebufferTexture2D(s,n,e.texTarget||a.TEXTURE_2D,t,e.level||0)}f.attachments.push(t)}),f},t.resizeFramebufferInfo=function(o,a,e,i,u){i=i||o.drawingBufferWidth,u=u||o.drawingBufferHeight,a.width=i,a.height=u,(e=e||m).forEach(function(e,t){var r=a.attachments[t],n=e.format;if(p.isRenderbuffer(o,r))o.bindRenderbuffer(o.RENDERBUFFER,r),o.renderbufferStorage(o.RENDERBUFFER,n,i,u);else{if(!p.isTexture(o,r))throw"unknown attachment type";l.resizeTexture(o,r,e,i,u)}})};var l=n(r("./src/textures.js")),p=n(r("./src/helper.js"));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}var h=36064,m=[{format:6408,type:5121,min:9729,wrap:33071},{format:34041}],d={};d[34041]=33306,d[6401]=36128,d[36168]=36128,d[6402]=36096,d[33189]=36096;var v={};v[32854]=!0,v[32855]=!0,v[36194]=!0,v[34041]=!0,v[33189]=!0,v[6401]=!0,v[36168]=!0},"./src/helper.js":function(e,t){t.__esModule=!0,t.copyExistingProperties=function(t,r){Object.keys(r).forEach(function(e){r.hasOwnProperty(e)&&t.hasOwnProperty(e)&&(r[e]=t[e])})},t.copyNamedProperties=function(e,r,n){e.forEach(function(e){var t=r[e];void 0!==t&&(n[e]=t)})},t.isBuffer=function(e,t){n||(n=e.createBuffer());return t instanceof n.constructor},t.isRenderbuffer=function(e,t){o||(o=e.createRenderbuffer());return t instanceof o.constructor},t.isShader=function(e,t){a||(a=e.createShader(e.VERTEX_SHADER));return t instanceof a.constructor},t.isTexture=function(e,t){i||(i=e.createTexture());return t instanceof i.constructor},t.isSampler=function(e,t){if(!u){if(!e.createSampler)return!1;u=e.createSampler()}return t instanceof u.constructor},t.warn=t.error=void 0;var r="undefined"!=typeof console&&console.error&&"function"==typeof console.error?console.error.bind(console):function(){};t.error=r;var n,o,a,i,u,s="undefined"!=typeof console&&console.warn&&"function"==typeof console.warn?console.warn.bind(console):function(){};t.warn=s},"./src/m4.js":function(e,t,r){t.__esModule=!0,t.axisRotate=function(e,t,r,n){n=n||new K(16);var o=t[0],a=t[1],i=t[2],u=Math.sqrt(o*o+a*a+i*i),s=(o/=u)*o,c=(a/=u)*a,f=(i/=u)*i,l=Math.cos(r),p=Math.sin(r),h=1-l,m=s+(1-s)*l,d=o*a*h+i*p,v=o*i*h-a*p,y=o*a*h-i*p,b=c+(1-c)*l,E=a*i*h+o*p,g=o*i*h+a*p,_=a*i*h-o*p,A=f+(1-f)*l,T=e[0],x=e[1],P=e[2],R=e[3],M=e[4],F=e[5],w=e[6],O=e[7],I=e[8],S=e[9],U=e[10],B=e[11];n[0]=m*T+d*M+v*I,n[1]=m*x+d*F+v*S,n[2]=m*P+d*w+v*U,n[3]=m*R+d*O+v*B,n[4]=y*T+b*M+E*I,n[5]=y*x+b*F+E*S,n[6]=y*P+b*w+E*U,n[7]=y*R+b*O+E*B,n[8]=g*T+_*M+A*I,n[9]=g*x+_*F+A*S,n[10]=g*P+_*w+A*U,n[11]=g*R+_*O+A*B,e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]);return n},t.axisRotation=function(e,t,r){r=r||new K(16);var n=e[0],o=e[1],a=e[2],i=Math.sqrt(n*n+o*o+a*a),u=(n/=i)*n,s=(o/=i)*o,c=(a/=i)*a,f=Math.cos(t),l=Math.sin(t),p=1-f;return r[0]=u+(1-u)*f,r[1]=n*o*p+a*l,r[2]=n*a*p-o*l,r[3]=0,r[4]=n*o*p-a*l,r[5]=s+(1-s)*f,r[6]=o*a*p+n*l,r[7]=0,r[8]=n*a*p+o*l,r[9]=o*a*p-n*l,r[10]=c+(1-c)*f,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},t.copy=a,t.frustum=function(e,t,r,n,o,a,i){i=i||new K(16);var u=t-e,s=n-r,c=o-a;return i[0]=2*o/u,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2*o/s,i[6]=0,i[7]=0,i[8]=(e+t)/u,i[9]=(n+r)/s,i[10]=a/c,i[11]=-1,i[12]=0,i[13]=0,i[14]=o*a/c,i[15]=0,i},t.getAxis=function(e,t,r){r=r||u.create();var n=4*t;return r[0]=e[0+n],r[1]=e[1+n],r[2]=e[2+n],r},t.getTranslation=function(e,t){return(t=t||u.create())[0]=e[12],t[1]=e[13],t[2]=e[14],t},t.identity=n,t.inverse=l,t.lookAt=function(e,t,r,n){n=n||new K(16);var o=s,a=c,i=f;return u.normalize(u.subtract(e,t,i),i),u.normalize(u.cross(r,i,o),o),u.normalize(u.cross(i,o,a),a),n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=0,n[4]=a[0],n[5]=a[1],n[6]=a[2],n[7]=0,n[8]=i[0],n[9]=i[1],n[10]=i[2],n[11]=0,n[12]=e[0],n[13]=e[1],n[14]=e[2],n[15]=1,n},t.multiply=function(e,t,r){r=r||new K(16);var n=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],p=e[9],h=e[10],m=e[11],d=e[12],v=e[13],y=e[14],b=e[15],E=t[0],g=t[1],_=t[2],A=t[3],T=t[4],x=t[5],P=t[6],R=t[7],M=t[8],F=t[9],w=t[10],O=t[11],I=t[12],S=t[13],U=t[14],B=t[15];return r[0]=n*E+u*g+l*_+d*A,r[1]=o*E+s*g+p*_+v*A,r[2]=a*E+c*g+h*_+y*A,r[3]=i*E+f*g+m*_+b*A,r[4]=n*T+u*x+l*P+d*R,r[5]=o*T+s*x+p*P+v*R,r[6]=a*T+c*x+h*P+y*R,r[7]=i*T+f*x+m*P+b*R,r[8]=n*M+u*F+l*w+d*O,r[9]=o*M+s*F+p*w+v*O,r[10]=a*M+c*F+h*w+y*O,r[11]=i*M+f*F+m*w+b*O,r[12]=n*I+u*S+l*U+d*B,r[13]=o*I+s*S+p*U+v*B,r[14]=a*I+c*S+h*U+y*B,r[15]=i*I+f*S+m*U+b*B,r},t.negate=function(e,t){return(t=t||new K(16))[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t[9]=-e[9],t[10]=-e[10],t[11]=-e[11],t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=-e[15],t},t.ortho=function(e,t,r,n,o,a,i){return(i=i||new K(16))[0]=2/(t-e),i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2/(n-r),i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2/(o-a),i[11]=0,i[12]=(t+e)/(e-t),i[13]=(n+r)/(r-n),i[14]=(a+o)/(o-a),i[15]=1,i},t.perspective=function(e,t,r,n,o){o=o||new K(16);var a=Math.tan(.5*Math.PI-.5*e),i=1/(r-n);return o[0]=a/t,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=a,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=(r+n)*i,o[11]=-1,o[12]=0,o[13]=0,o[14]=r*n*i*2,o[15]=0,o},t.rotateX=function(e,t,r){r=r||new K(16);var n=e[4],o=e[5],a=e[6],i=e[7],u=e[8],s=e[9],c=e[10],f=e[11],l=Math.cos(t),p=Math.sin(t);r[4]=l*n+p*u,r[5]=l*o+p*s,r[6]=l*a+p*c,r[7]=l*i+p*f,r[8]=l*u-p*n,r[9]=l*s-p*o,r[10]=l*c-p*a,r[11]=l*f-p*i,e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]);return r},t.rotateY=function(e,t,r){r=r||new K(16);var n=e[0],o=e[1],a=e[2],i=e[3],u=e[8],s=e[9],c=e[10],f=e[11],l=Math.cos(t),p=Math.sin(t);r[0]=l*n-p*u,r[1]=l*o-p*s,r[2]=l*a-p*c,r[3]=l*i-p*f,r[8]=l*u+p*n,r[9]=l*s+p*o,r[10]=l*c+p*a,r[11]=l*f+p*i,e!==r&&(r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]);return r},t.rotateZ=function(e,t,r){r=r||new K(16);var n=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=Math.cos(t),p=Math.sin(t);r[0]=l*n+p*u,r[1]=l*o+p*s,r[2]=l*a+p*c,r[3]=l*i+p*f,r[4]=l*u-p*n,r[5]=l*s-p*o,r[6]=l*c-p*a,r[7]=l*f-p*i,e!==r&&(r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]);return r},t.rotationX=function(e,t){t=t||new K(16);var r=Math.cos(e),n=Math.sin(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.rotationY=function(e,t){t=t||new K(16);var r=Math.cos(e),n=Math.sin(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.rotationZ=function(e,t){t=t||new K(16);var r=Math.cos(e),n=Math.sin(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.scale=function(e,t,r){r=r||new K(16);var n=t[0],o=t[1],a=t[2];r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=n*e[3],r[4]=o*e[4],r[5]=o*e[5],r[6]=o*e[6],r[7]=o*e[7],r[8]=a*e[8],r[9]=a*e[9],r[10]=a*e[10],r[11]=a*e[11],e!==r&&(r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]);return r},t.scaling=function(e,t){return(t=t||new K(16))[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.setAxis=function(e,t,r,n){n!==e&&(n=a(e,n));var o=4*r;return n[0+o]=t[0],n[1+o]=t[1],n[2+o]=t[2],n},t.setDefaultType=function(e){var t=K;return K=e,t},t.setTranslation=function(e,t,r){r=r||n(),e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11]);return r[12]=t[0],r[13]=t[1],r[14]=t[2],r[15]=1,r},t.transformDirection=function(e,t,r){r=r||u.create();var n=t[0],o=t[1],a=t[2];return r[0]=n*e[0]+o*e[4]+a*e[8],r[1]=n*e[1]+o*e[5]+a*e[9],r[2]=n*e[2]+o*e[6]+a*e[10],r},t.transformNormal=function(e,t,r){r=r||u.create();var n=l(e),o=t[0],a=t[1],i=t[2];return r[0]=o*n[0]+a*n[1]+i*n[2],r[1]=o*n[4]+a*n[5]+i*n[6],r[2]=o*n[8]+a*n[9]+i*n[10],r},t.transformPoint=function(e,t,r){r=r||u.create();var n=t[0],o=t[1],a=t[2],i=n*e[3]+o*e[7]+a*e[11]+e[15];return r[0]=(n*e[0]+o*e[4]+a*e[8]+e[12])/i,r[1]=(n*e[1]+o*e[5]+a*e[9]+e[13])/i,r[2]=(n*e[2]+o*e[6]+a*e[10]+e[14])/i,r},t.translate=function(e,t,r){r=r||new K(16);var n=t[0],o=t[1],a=t[2],i=e[0],u=e[1],s=e[2],c=e[3],f=e[4],l=e[5],p=e[6],h=e[7],m=e[8],d=e[9],v=e[10],y=e[11],b=e[12],E=e[13],g=e[14],_=e[15];e!==r&&(r[0]=i,r[1]=u,r[2]=s,r[3]=c,r[4]=f,r[5]=l,r[6]=p,r[7]=h,r[8]=m,r[9]=d,r[10]=v,r[11]=y);return r[12]=i*n+f*o+m*a+b,r[13]=u*n+l*o+d*a+E,r[14]=s*n+p*o+v*a+g,r[15]=c*n+h*o+y*a+_,r},t.translation=function(e,t){return(t=t||new K(16))[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},t.transpose=function(e,t){if((t=t||new K(16))===e){var r;return r=e[1],e[1]=e[4],e[4]=r,r=e[2],e[2]=e[8],e[8]=r,r=e[3],e[3]=e[12],e[12]=r,r=e[6],e[6]=e[9],e[9]=r,r=e[7],e[7]=e[13],e[13]=r,r=e[11],e[11]=e[14],e[14]=r,t}var n=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],p=e[9],h=e[10],m=e[11],d=e[12],v=e[13],y=e[14],b=e[15];return t[0]=n,t[1]=u,t[2]=l,t[3]=d,t[4]=o,t[5]=s,t[6]=p,t[7]=v,t[8]=a,t[9]=c,t[10]=h,t[11]=y,t[12]=i,t[13]=f,t[14]=m,t[15]=b,t};var u=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r("./src/v3.js"));var K=Float32Array,s=u.create(),c=u.create(),f=u.create();function a(e,t){return(t=t||new K(16))[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function n(e){return(e=e||new K(16))[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function l(e,t){t=t||new K(16);var r=e[0],n=e[1],o=e[2],a=e[3],i=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=e[9],p=e[10],h=e[11],m=e[12],d=e[13],v=e[14],y=e[15],b=p*y,E=v*h,g=s*y,_=v*c,A=s*h,T=p*c,x=o*y,P=v*a,R=o*h,M=p*a,F=o*c,w=s*a,O=f*d,I=m*l,S=i*d,U=m*u,B=i*l,C=f*u,j=r*d,L=m*n,N=r*l,D=f*n,z=r*u,k=i*n,G=b*u+_*l+A*d-(E*u+g*l+T*d),X=E*n+x*l+M*d-(b*n+P*l+R*d),V=g*n+P*u+F*d-(_*n+x*u+w*d),Y=T*n+R*u+w*l-(A*n+M*u+F*l),W=1/(r*G+i*X+f*V+m*Y);return t[0]=W*G,t[1]=W*X,t[2]=W*V,t[3]=W*Y,t[4]=W*(E*i+g*f+T*m-(b*i+_*f+A*m)),t[5]=W*(b*r+P*f+R*m-(E*r+x*f+M*m)),t[6]=W*(_*r+x*i+w*m-(g*r+P*i+F*m)),t[7]=W*(A*r+M*i+F*f-(T*r+R*i+w*f)),t[8]=W*(O*c+U*h+B*y-(I*c+S*h+C*y)),t[9]=W*(I*a+j*h+D*y-(O*a+L*h+N*y)),t[10]=W*(S*a+L*c+z*y-(U*a+j*c+k*y)),t[11]=W*(C*a+N*c+k*h-(B*a+D*c+z*h)),t[12]=W*(S*p+C*v+I*s-(B*v+O*s+U*p)),t[13]=W*(N*v+O*o+L*p-(j*p+D*v+I*o)),t[14]=W*(j*s+k*v+U*o-(z*v+S*o+L*s)),t[15]=W*(z*p+B*o+D*s-(N*s+k*p+C*o)),t}},"./src/primitives.js":function(e,t,r){t.__esModule=!0,t.create3DFVertices=P,t.createAugmentedTypedArray=B,t.createCubeVertices=A,t.createPlaneVertices=E,t.createSphereVertices=g,t.createTruncatedConeVertices=T,t.createXYQuadVertices=v,t.createCresentVertices=R,t.createCylinderVertices=M,t.createTorusVertices=w,t.createDiscVertices=O,t.deindexVertices=function(u){var s=u.indices,c={},f=s.length;return Object.keys(u).filter(l).forEach(function(e){for(var t=u[e],r=t.numComponents,n=B(r,f,t.constructor),o=0;o<f;++o)for(var a=s[o]*r,i=0;i<r;++i)n.push(t[a+i]);c[e]=n}),c},t.flattenNormals=function(e){if(e.indices)throw"can't flatten normals of indexed vertices. deindex them first";for(var t=e.normal,r=t.length,n=0;n<r;n+=9){var o=t[n+0],a=t[n+1],i=t[n+2],u=t[n+3],s=t[n+4],c=t[n+5],f=t[n+6],l=t[n+7],p=t[n+8],h=o+u+f,m=a+s+l,d=i+c+p,v=Math.sqrt(h*h+m*m+d*d);h/=v,m/=v,d/=v,t[n+0]=h,t[n+1]=m,t[n+2]=d,t[n+3]=h,t[n+4]=m,t[n+5]=d,t[n+6]=h,t[n+7]=m,t[n+8]=d}return e},t.makeRandomVertexColors=function(e,t){t=t||{};var r=e.position.numElements,n=B(4,r,Uint8Array),o=t.rand||function(e,t){return t<3?function(e){return Math.random()*e|0}(256):255};if(e.color=n,e.indices)for(var a=0;a<r;++a)n.push(o(a,0),o(a,1),o(a,2),o(a,3));else for(var i=t.vertsPerColor||3,u=r/i,s=0;s<u;++s)for(var c=[o(s,0),o(s,1),o(s,2),o(s,3)],f=0;f<i;++f)n.push(c);return e},t.reorientDirections=h,t.reorientNormals=m,t.reorientPositions=d,t.reorientVertices=b,t.concatVertices=function(s){for(var a,i={},e=function(e){var o=s[e];Object.keys(o).forEach(function(e){i[e]||(i[e]=[]),a||"indices"===e||(a=e);var t=o[e],r=u(t,e),n=c(t).length/r;i[e].push(n)})},t=0;t<s.length;++t)e(t);var n=i[a],o={};return Object.keys(i).forEach(function(e){var t=function(e){for(var t,r=0,n=0;n<s.length;++n){var o=s[n][e],a=c(o);r+=a.length,t&&!o.data||(t=o)}return{length:r,spec:t}}(e),r=j(t.spec,t.length);!function(e,t,r){for(var n=0,o=0,a=0;a<s.length;++a){var i=s[a][e],u=c(i);"indices"===e?(C(u,r,o,n),n+=t[a]):C(u,r,o),o+=u.length}}(e,n,c(r)),o[e]=r}),o},t.duplicateVertices=function(o){var a={};return Object.keys(o).forEach(function(e){var t=o[e],r=c(t),n=j(t,r.length);C(r,c(n),0),a[e]=n}),a},t.createDiscBuffers=t.createDiscBufferInfo=t.createTorusBuffers=t.createTorusBufferInfo=t.createCylinderBuffers=t.createCylinderBufferInfo=t.createCresentBuffers=t.createCresentBufferInfo=t.createXYQuadBuffers=t.createXYQuadBufferInfo=t.createTruncatedConeBuffers=t.createTruncatedConeBufferInfo=t.createSphereBuffers=t.createSphereBufferInfo=t.createPlaneBuffers=t.createPlaneBufferInfo=t.createCubeBuffers=t.createCubeBufferInfo=t.create3DFBuffers=t.create3DFBufferInfo=void 0;var n=o(r("./src/attributes.js")),a=o(r("./src/helper.js")),i=o(r("./src/typedarrays.js")),y=o(r("./src/m4.js")),F=o(r("./src/v3.js"));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}var c=n.getArray_,u=n.getNumComponents_;function s(o,e){var a=0;return o.push=function(){for(var e=arguments,t=0;t<arguments.length;++t){var r=e[t];if(r instanceof Array||i.isArrayBuffer(r))for(var n=0;n<r.length;++n)o[a++]=r[n];else o[a++]=r}},o.reset=function(e){a=e||0},o.numComponents=e,Object.defineProperty(o,"numElements",{get:function(){return this.length/this.numComponents|0}}),o}function B(e,t,r){return s(new(r||Float32Array)(e*t),e)}function l(e){return"indices"!==e}function f(e,t,r){for(var n=e.length,o=new Float32Array(3),a=0;a<n;a+=3)r(t,[e[a],e[a+1],e[a+2]],o),e[a]=o[0],e[a+1]=o[1],e[a+2]=o[2]}function p(e,t,r){r=r||F.create();var n=t[0],o=t[1],a=t[2];return r[0]=n*e[0]+o*e[1]+a*e[2],r[1]=n*e[4]+o*e[5]+a*e[6],r[2]=n*e[8]+o*e[9]+a*e[10],r}function h(e,t){return f(e,t,y.transformDirection),e}function m(e,t){return f(e,y.inverse(t),p),e}function d(e,t){return f(e,t,y.transformPoint),e}function b(r,n){return Object.keys(r).forEach(function(e){var t=r[e];0<=e.indexOf("pos")?d(t,n):0<=e.indexOf("tan")||0<=e.indexOf("binorm")?h(t,n):0<=e.indexOf("norm")&&m(t,n)}),r}function v(e,t,r){return e=e||2,{position:{numComponents:2,data:[(t=t||0)+-1*(e*=.5),(r=r||0)+-1*e,t+1*e,r+-1*e,t+-1*e,r+1*e,t+1*e,r+1*e]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function E(e,t,r,n,o){e=e||1,t=t||1,r=r||1,n=n||1,o=o||y.identity();for(var a=(r+1)*(n+1),i=B(3,a),u=B(3,a),s=B(2,a),c=0;c<=n;c++)for(var f=0;f<=r;f++){var l=f/r,p=c/n;i.push(e*l-.5*e,0,t*p-.5*t),u.push(0,1,0),s.push(l,p)}for(var h=r+1,m=B(3,r*n*2,Uint16Array),d=0;d<n;d++)for(var v=0;v<r;v++)m.push((d+0)*h+v,(d+1)*h+v,(d+0)*h+v+1),m.push((d+1)*h+v,(d+1)*h+v+1,(d+0)*h+v+1);return b({position:i,normal:u,texcoord:s,indices:m},o)}function g(e,t,r,n,o,a,i){if(t<=0||r<=0)throw Error("subdivisionAxis and subdivisionHeight must be > 0");n=n||0,a=a||0;for(var u=(o=o||Math.PI)-n,s=(i=i||2*Math.PI)-a,c=(t+1)*(r+1),f=B(3,c),l=B(3,c),p=B(2,c),h=0;h<=r;h++)for(var m=0;m<=t;m++){var d=m/t,v=h/r,y=s*d+a,b=u*v+n,E=Math.sin(y),g=Math.cos(y),_=Math.sin(b),A=g*_,T=Math.cos(b),x=E*_;f.push(e*A,e*T,e*x),l.push(A,T,x),p.push(1-d,v)}for(var P=t+1,R=B(3,t*r*2,Uint16Array),M=0;M<t;M++)for(var F=0;F<r;F++)R.push((F+0)*P+M,(F+0)*P+M+1,(F+1)*P+M),R.push((F+1)*P+M,(F+0)*P+M+1,(F+1)*P+M+1);return{position:f,normal:l,texcoord:p,indices:R}}var _=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function A(e){for(var t=(e=e||1)/2,r=[[-t,-t,-t],[+t,-t,-t],[-t,+t,-t],[+t,+t,-t],[-t,-t,+t],[+t,-t,+t],[-t,+t,+t],[+t,+t,+t]],n=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],o=[[1,0],[0,0],[0,1],[1,1]],a=B(3,24),i=B(3,24),u=B(2,24),s=B(3,12,Uint16Array),c=0;c<6;++c){for(var f=_[c],l=0;l<4;++l){var p=r[f[l]],h=n[c],m=o[l];a.push(p),i.push(h),u.push(m)}var d=4*c;s.push(0+d,1+d,2+d),s.push(0+d,2+d,3+d)}return{position:a,normal:i,texcoord:u,indices:s}}function T(e,t,r,n,o,a,i){if(n<3)throw Error("radialSubdivisions must be 3 or greater");if(o<1)throw Error("verticalSubdivisions must be 1 or greater");for(var u=void 0===a||a,s=void 0===i||i,c=(u?2:0)+(s?2:0),f=(n+1)*(o+1+c),l=B(3,f),p=B(3,f),h=B(2,f),m=B(3,n*(o+c)*2,Uint16Array),d=n+1,v=Math.atan2(e-t,r),y=Math.cos(v),b=Math.sin(v),E=o+(s?2:0),g=u?-2:0;g<=E;++g){var _=g/o,A=r*_,T=void 0;T=g<0?(A=0,_=1,e):o<g?(A=r,_=1,t):e+g/o*(t-e),-2!==g&&g!==o+2||(_=T=0),A-=r/2;for(var x=0;x<d;++x){var P=Math.sin(x*Math.PI*2/n),R=Math.cos(x*Math.PI*2/n);l.push(P*T,A,R*T),p.push(g<0||o<g?0:P*y,g<0?-1:o<g?1:b,g<0||o<g?0:R*y),h.push(x/n,1-_)}}for(var M=0;M<o+c;++M)for(var F=0;F<n;++F)m.push(d*(M+0)+0+F,d*(M+0)+1+F,d*(M+1)+1+F),m.push(d*(M+0)+0+F,d*(M+1)+1+F,d*(M+1)+0+F);return{position:l,normal:p,texcoord:h,indices:m}}function x(e,t){t=t||[];for(var r=[],n=0;n<e.length;n+=4){var o=e[n],a=e.slice(n+1,n+4);a.push.apply(a,t);for(var i=0;i<o;++i)r.push.apply(r,a)}return r}function P(){var e=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],t=x([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),r=x([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),n=e.length/3,o={position:B(3,n),texcoord:B(2,n),normal:B(3,n),color:B(4,n,Uint8Array),indices:B(3,n/3,Uint16Array)};o.position.push(e),o.texcoord.push([.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0]),o.normal.push(t),o.color.push(r);for(var a=0;a<n;++a)o.indices.push(a);return o}function R(E,e,t,g,_,A,r){if(_<=0)throw Error("subdivisionDown must be > 0");var T=2,x=(r=r||1)-(A=A||0),n=2*(_+1)*(2+T),P=B(3,n),R=B(3,n),M=B(2,n);function o(e,t,r,n,o,a){for(var i=0;i<=_;i++){var u=t/(T-1),s=i/_,c=2*(u-.5),f=(A+s*x)*Math.PI,l=Math.sin(f),p=Math.cos(f),h=(b=E)+(e-b)*l,m=c*g,d=p*E,v=l*h;P.push(m,d,v);var y=F.add(F.multiply([0,l,p],r),n);R.push(y),M.push(u*o+a,s)}var b}for(var a=0;a<T;a++){var i=2*(a/(T-1)-.5);o(e,a,[1,1,1],[0,0,0],1,0),o(e,a,[0,0,0],[i,0,0],0,0),o(t,a,[1,1,1],[0,0,0],1,0),o(t,a,[0,0,0],[i,0,0],0,1)}var u=B(3,2*_*(2+T),Uint16Array);function s(e,t){for(var r=0;r<_;++r)u.push(e+r+0,e+r+1,t+r+0),u.push(e+r+1,t+r+1,t+r+0)}var c=_+1;return s(0*c,4*c),s(5*c,7*c),s(6*c,2*c),s(3*c,1*c),{position:P,normal:R,texcoord:M,indices:u}}function M(e,t,r,n,o,a){return T(e,e,t,r,n,o,a)}function w(e,t,r,n,o,a){if(r<3)throw Error("radialSubdivisions must be 3 or greater");if(n<3)throw Error("verticalSubdivisions must be 3 or greater");o=o||0;for(var i=(a=a||2*Math.PI)-o,u=r+1,s=n+1,c=u*s,f=B(3,c),l=B(3,c),p=B(2,c),h=B(3,r*n*2,Uint16Array),m=0;m<s;++m)for(var d=m/n,v=d*Math.PI*2,y=Math.sin(v),b=e+y*t,E=Math.cos(v),g=E*t,_=0;_<u;++_){var A=_/r,T=o+A*i,x=Math.sin(T),P=Math.cos(T),R=x*b,M=P*b,F=x*y,w=P*y;f.push(R,g,M),l.push(F,E,w),p.push(A,1-d)}for(var O=0;O<n;++O)for(var I=0;I<r;++I){var S=1+I,U=1+O;h.push(u*O+I,u*U+I,u*O+S),h.push(u*U+I,u*U+S,u*O+S)}return{position:f,normal:l,texcoord:p,indices:h}}function O(e,t,r,n,o){if(t<3)throw Error("divisions must be at least 3");o=o||1,n=n||0;for(var a=(t+1)*((r=r||1)+1),i=B(3,a),u=B(3,a),s=B(2,a),c=B(3,r*t*2,Uint16Array),f=0,l=e-n,p=t+1,h=0;h<=r;++h){for(var m=n+l*Math.pow(h/r,o),d=0;d<=t;++d){var v=2*Math.PI*d/t,y=m*Math.cos(v),b=m*Math.sin(v);if(i.push(y,0,b),u.push(0,1,0),s.push(1-d/t,h/r),0<h&&d!==t){var E=f+(d+1),g=f+d,_=f+d-p,A=f+(d+1)-p;c.push(E,g,_),c.push(E,_,A)}}f+=t+1}return{position:i,normal:u,texcoord:s,indices:c}}function I(r){return function(e){var t=r.apply(this,Array.prototype.slice.call(arguments,1));return n.createBuffersFromArrays(e,t)}}function S(r){return function(e){var t=r.apply(null,Array.prototype.slice.call(arguments,1));return n.createBufferInfoFromArrays(e,t)}}var U=["numComponents","size","type","normalize","stride","offset","attrib","name","attribName"];function C(e,t,r,n){n=n||0;for(var o=e.length,a=0;a<o;++a)t[r+a]=e[a]+n}function j(e,t){var r=c(e),n=new r.constructor(t),o=n;return r.numComponents&&r.numElements&&s(n,r.numComponents),e.data&&(o={data:n},a.copyNamedProperties(U,e,o)),o}var L=S(P);t.create3DFBufferInfo=L;var N=I(P);t.create3DFBuffers=N;var D=S(A);t.createCubeBufferInfo=D;var z=I(A);t.createCubeBuffers=z;var k=S(E);t.createPlaneBufferInfo=k;var G=I(E);t.createPlaneBuffers=G;var X=S(g);t.createSphereBufferInfo=X;var V=I(g);t.createSphereBuffers=V;var Y=S(T);t.createTruncatedConeBufferInfo=Y;var W=I(T);t.createTruncatedConeBuffers=W;var K=S(v);t.createXYQuadBufferInfo=K;var q=I(v);t.createXYQuadBuffers=q;var H=S(R);t.createCresentBufferInfo=H;var Z=I(R);t.createCresentBuffers=Z;var Q=S(M);t.createCylinderBufferInfo=Q;var J=I(M);t.createCylinderBuffers=J;var $=S(w);t.createTorusBufferInfo=$;var ee=I(w);t.createTorusBuffers=ee;var te=S(O);t.createDiscBufferInfo=te;var re=I(O);t.createDiscBuffers=re},"./src/programs.js":function(e,t,r){t.__esModule=!0,t.createAttributeSetters=G,t.createProgram=I,t.createProgramFromScripts=function(e,t,r,n,o){for(var a=M(r,n,o),i=[],u=0;u<t.length;++u){var s=S(e,t[u],e[F[u]],a.errorCallback);if(!s)return null;i.push(s)}return I(e,i,a)},t.createProgramFromSources=U,t.createProgramInfo=function(e,t,r,n,o){var a=M(r,n,o),i=!0;if(t=t.map(function(e){if(e.indexOf("\n")<0){var t=y(e);t?e=t.text:(a.errorCallback("no element with id: "+e),i=!1)}return e}),!i)return null;var u=U(e,t,a);return u?V(e,u):null},t.createProgramInfoFromProgram=V,t.createUniformSetters=C,t.createUniformBlockSpecFromProgram=N,t.createUniformBlockInfoFromProgram=z,t.createUniformBlockInfo=function(e,t,r){return z(e,t.program,t.uniformBlockSpec,r)},t.createTransformFeedback=function(e,t,r){var n=e.createTransformFeedback();return e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,n),e.useProgram(t.program),L(e,t,r),e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null),n},t.createTransformFeedbackInfo=j,t.bindTransformFeedbackInfo=L,t.setAttributes=X,t.setBuffersAndAttributes=function(e,t,r){r.vertexArrayObject?e.bindVertexArray(r.vertexArrayObject):(X(t.attribSetters||t,r.attribs),r.indices&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r.indices))},t.setUniforms=function e(t,r){var n=arguments;var o=t.uniformSetters||t;var a=arguments.length;for(var i=1;i<a;++i){var u=n[i];if(Array.isArray(u))for(var s=u.length,c=0;c<s;++c)e(o,u[c]);else for(var f in u){var l=o[f];l&&l(u[f])}}},t.setUniformBlock=function(e,t,r){k(e,t,r)&&e.bufferData(e.UNIFORM_BUFFER,r.array,e.DYNAMIC_DRAW)},t.setBlockUniforms=function(e,t){var r=e.uniforms;for(var n in t){var o=r[n];if(o){var a=t[n];a.length?o.set(a):o[0]=a}}},t.bindUniformBlock=k;var s=n(r("./src/utils.js")),v=n(r("./src/helper.js"));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}var c=v.error,p=v.warn,y="undefined"!=typeof document&&document.getElementById?document.getElementById.bind(document):function(){return null},o=34067,a=35866,h={};function f(e,t){return h[t].bindPoint}function i(t,r){return function(e){t.uniform1i(r,e)}}function u(t,r){return function(e){t.uniform1iv(r,e)}}function l(t,r){return function(e){t.uniform2iv(r,e)}}function m(t,r){return function(e){t.uniform3iv(r,e)}}function d(t,r){return function(e){t.uniform4iv(r,e)}}function b(n,e,o,a){var i=f(0,e);return s.isWebGL2(n)?function(e){var t,r;r=v.isTexture(n,e)?(t=e,null):(t=e.texture,e.sampler),n.uniform1i(a,o),n.activeTexture(n.TEXTURE0+o),n.bindTexture(i,t),n.bindSampler(o,r)}:function(e){n.uniform1i(a,o),n.activeTexture(n.TEXTURE0+o),n.bindTexture(i,e)}}function E(o,e,a,t,r){for(var i=f(0,e),u=new Int32Array(r),n=0;n<r;++n)u[n]=a+n;return s.isWebGL2(o)?function(e){o.uniform1iv(t,u),e.forEach(function(e,t){var r,n;o.activeTexture(o.TEXTURE0+u[t]),n=v.isTexture(o,e)?(r=e,null):(r=e.texture,e.sampler),o.bindSampler(a,n),o.bindTexture(i,r)})}:function(e){o.uniform1iv(t,u),e.forEach(function(e,t){o.activeTexture(o.TEXTURE0+u[t]),o.bindTexture(i,e)})}}function g(t,r){return function(e){e.value?(t.disableVertexAttribArray(r),t.vertexAttrib4fv(r,e.value)):(t.bindBuffer(t.ARRAY_BUFFER,e.buffer),t.enableVertexAttribArray(r),t.vertexAttribPointer(r,e.numComponents||e.size,e.type||t.FLOAT,e.normalize||!1,e.stride||0,e.offset||0),void 0!==e.divisor&&t.vertexAttribDivisor(r,e.divisor))}}function _(t,r){return function(e){e.value?(t.disableVertexAttribArray(r),t.vertexAttrib4iv(r,e.value)):(t.bindBuffer(t.ARRAY_BUFFER,e.buffer),t.enableVertexAttribArray(r),t.vertexAttribIPointer(r,e.numComponents||e.size,e.type||t.INT,e.stride||0,e.offset||0),void 0!==e.divisor&&t.vertexAttribDivisor(r,e.divisor))}}function A(t,r){return function(e){e.value?(t.disableVertexAttribArray(r),t.vertexAttrib4uiv(r,e.value)):(t.bindBuffer(t.ARRAY_BUFFER,e.buffer),t.enableVertexAttribArray(r),t.vertexAttribIPointer(r,e.numComponents||e.size,e.type||t.UNSIGNED_INT,e.stride||0,e.offset||0),void 0!==e.divisor&&t.vertexAttribDivisor(r,e.divisor))}}function T(c,f,e){var l=e.size,p=e.count;return function(e){c.bindBuffer(c.ARRAY_BUFFER,e.buffer);for(var t=e.size||e.numComponents||l,r=t/p,n=e.type||c.FLOAT,o=h[n].size*t,a=e.normalize||!1,i=e.offset||0,u=o/p,s=0;s<p;++s)c.enableVertexAttribArray(f+s),c.vertexAttribPointer(f+s,r,n,a,o,i+u*s),void 0!==e.divisor&&c.vertexAttribDivisor(f+s,e.divisor)}}h[5126]={Type:Float32Array,size:4,setter:function(t,r){return function(e){t.uniform1f(r,e)}},arraySetter:function(t,r){return function(e){t.uniform1fv(r,e)}}},h[35664]={Type:Float32Array,size:8,setter:function(t,r){return function(e){t.uniform2fv(r,e)}}},h[35665]={Type:Float32Array,size:12,setter:function(t,r){return function(e){t.uniform3fv(r,e)}}},h[35666]={Type:Float32Array,size:16,setter:function(t,r){return function(e){t.uniform4fv(r,e)}}},h[5124]={Type:Int32Array,size:4,setter:i,arraySetter:u},h[35667]={Type:Int32Array,size:8,setter:l},h[35668]={Type:Int32Array,size:12,setter:m},h[35669]={Type:Int32Array,size:16,setter:d},h[5125]={Type:Uint32Array,size:4,setter:function(t,r){return function(e){t.uniform1ui(r,e)}},arraySetter:function(t,r){return function(e){t.uniform1uiv(r,e)}}},h[36294]={Type:Uint32Array,size:8,setter:function(t,r){return function(e){t.uniform2uiv(r,e)}}},h[36295]={Type:Uint32Array,size:12,setter:function(t,r){return function(e){t.uniform3uiv(r,e)}}},h[36296]={Type:Uint32Array,size:16,setter:function(t,r){return function(e){t.uniform4uiv(r,e)}}},h[35670]={Type:Uint32Array,size:4,setter:i,arraySetter:u},h[35671]={Type:Uint32Array,size:8,setter:l},h[35672]={Type:Uint32Array,size:12,setter:m},h[35673]={Type:Uint32Array,size:16,setter:d},h[35674]={Type:Float32Array,size:16,setter:function(t,r){return function(e){t.uniformMatrix2fv(r,!1,e)}}},h[35675]={Type:Float32Array,size:36,setter:function(t,r){return function(e){t.uniformMatrix3fv(r,!1,e)}}},h[35676]={Type:Float32Array,size:64,setter:function(t,r){return function(e){t.uniformMatrix4fv(r,!1,e)}}},h[35685]={Type:Float32Array,size:24,setter:function(t,r){return function(e){t.uniformMatrix2x3fv(r,!1,e)}}},h[35686]={Type:Float32Array,size:32,setter:function(t,r){return function(e){t.uniformMatrix2x4fv(r,!1,e)}}},h[35687]={Type:Float32Array,size:24,setter:function(t,r){return function(e){t.uniformMatrix3x2fv(r,!1,e)}}},h[35688]={Type:Float32Array,size:48,setter:function(t,r){return function(e){t.uniformMatrix3x4fv(r,!1,e)}}},h[35689]={Type:Float32Array,size:32,setter:function(t,r){return function(e){t.uniformMatrix4x2fv(r,!1,e)}}},h[35690]={Type:Float32Array,size:48,setter:function(t,r){return function(e){t.uniformMatrix4x3fv(r,!1,e)}}},h[35678]={Type:null,size:0,setter:b,arraySetter:E,bindPoint:3553},h[35680]={Type:null,size:0,setter:b,arraySetter:E,bindPoint:o},h[35679]={Type:null,size:0,setter:b,arraySetter:E,bindPoint:32879},h[35682]={Type:null,size:0,setter:b,arraySetter:E,bindPoint:3553},h[36289]={Type:null,size:0,setter:b,arraySetter:E,bindPoint:a},h[36292]={Type:null,size:0,setter:b,arraySetter:E,bindPoint:a},h[36293]={Type:null,size:0,setter:b,arraySetter:E,bindPoint:o},h[36298]={Type:null,size:0,setter:b,arraySetter:E,bindPoint:3553},h[36299]={Type:null,size:0,setter:b,arraySetter:E,bindPoint:32879},h[36300]={Type:null,size:0,setter:b,arraySetter:E,bindPoint:o},h[36303]={Type:null,size:0,setter:b,arraySetter:E,bindPoint:a},h[36306]={Type:null,size:0,setter:b,arraySetter:E,bindPoint:3553},h[36307]={Type:null,size:0,setter:b,arraySetter:E,bindPoint:32879},h[36308]={Type:null,size:0,setter:b,arraySetter:E,bindPoint:o},h[36311]={Type:null,size:0,setter:b,arraySetter:E,bindPoint:a};var x={};x[5126]={size:4,setter:g},x[35664]={size:8,setter:g},x[35665]={size:12,setter:g},x[35666]={size:16,setter:g},x[5124]={size:4,setter:_},x[35667]={size:8,setter:_},x[35668]={size:12,setter:_},x[35669]={size:16,setter:_},x[5125]={size:4,setter:A},x[36294]={size:8,setter:A},x[36295]={size:12,setter:A},x[36296]={size:16,setter:A},x[35670]={size:4,setter:_},x[35671]={size:8,setter:_},x[35672]={size:12,setter:_},x[35673]={size:16,setter:_},x[35674]={size:4,setter:T,count:2},x[35675]={size:9,setter:T,count:3},x[35676]={size:16,setter:T,count:4};var P=/^[ \t]*\n/;function R(e,t,r,n){var o=n||c,a=e.createShader(r),i=0;if(P.test(t)&&(i=1,t=t.replace(P,"")),e.shaderSource(a,t),e.compileShader(a),e.getShaderParameter(a,e.COMPILE_STATUS))return a;var u=e.getShaderInfoLog(a);return o(function(e,r){return r=r||0,++r,e.split("\n").map(function(e,t){return t+r+": "+e}).join("\n")}(t,i)+"\n*** Error compiling shader: "+u),e.deleteShader(a),null}function M(e,r,t){var n;if("function"==typeof r&&(t=r,r=void 0),"function"==typeof e)t=e,e=void 0;else if(e&&!Array.isArray(e)){if(e.errorCallback)return e;var o=e;t=o.errorCallback,e=o.attribLocations,n=o.transformFeedbackVaryings}var a={errorCallback:t||c,transformFeedbackVaryings:n};if(e){var i={};Array.isArray(e)?e.forEach(function(e,t){i[e]=r?r[t]:t}):i=e,a.attribLocations=i}return a}var F=["VERTEX_SHADER","FRAGMENT_SHADER"];function w(e,t){return 0<=t.indexOf("frag")?e.FRAGMENT_SHADER:0<=t.indexOf("vert")?e.VERTEX_SHADER:void 0}function O(t,e){e.forEach(function(e){t.deleteShader(e)})}function I(t,e,r,n,o){for(var a=M(r,n,o),i=[],u=[],s=0;s<e.length;++s){var c=e[s];if("string"==typeof c){var f=y(c),l=f?f.text:c,p=t[F[s]];f&&f.type&&(p=w(t,f.type)||p),c=R(t,l,p,a.errorCallback),u.push(c)}v.isShader(t,c)&&i.push(c)}if(i.length!==e.length)return a.errorCallback("not enough shaders for program"),O(t,u),null;var h=t.createProgram();i.forEach(function(e){t.attachShader(h,e)}),a.attribLocations&&Object.keys(a.attribLocations).forEach(function(e){t.bindAttribLocation(h,a.attribLocations[e],e)});var m=a.transformFeedbackVaryings;if(m&&(m.attribs&&(m=m.attribs),Array.isArray(m)||(m=Object.keys(m)),t.transformFeedbackVaryings(h,m,a.transformFeedbackMode||t.SEPARATE_ATTRIBS)),t.linkProgram(h),t.getProgramParameter(h,t.LINK_STATUS))return h;var d=t.getProgramInfoLog(h);return a.errorCallback("Error in program linking:"+d),t.deleteProgram(h),O(t,u),null}function S(e,t,r,n){var o,a=y(t);if(!a)throw"*** Error: unknown script element"+t;o=a.text;var i=r||w(e,a.type);if(!i)throw"*** Error: unknown shader type";return R(e,o,i,n)}function U(e,t,r,n,o){for(var a=M(r,n,o),i=[],u=0;u<t.length;++u){var s=R(e,t[u],e[F[u]],a.errorCallback);if(!s)return null;i.push(s)}return I(e,i,a)}function B(e){var t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}function C(s,e){var c=0;function t(e,t){var r,n=s.getUniformLocation(e,t.name),o=1<t.size&&"[0]"===t.name.substr(-3),a=t.type,i=h[a];if(!i)throw"unknown type: 0x"+a.toString(16);if(i.bindPoint){var u=c;c+=t.size,r=o?i.arraySetter(s,a,u,n,t.size):i.setter(s,a,u,n,t.size)}else r=i.arraySetter&&o?i.arraySetter(s,n):i.setter(s,n);return r.location=n,r}for(var r={},n=s.getProgramParameter(e,s.ACTIVE_UNIFORMS),o=0;o<n;++o){var a=s.getActiveUniform(e,o);if(!B(a)){var i=a.name;"[0]"===i.substr(-3)&&(i=i.substr(0,i.length-3));var u=t(e,a);r[i]=u}}return r}function j(e,t){for(var r={},n=e.getProgramParameter(t,e.TRANSFORM_FEEDBACK_VARYINGS),o=0;o<n;++o){var a=e.getTransformFeedbackVarying(t,o);r[a.name]={index:o,type:a.type,size:a.size}}return r}function L(e,t,r){for(var n in t.transformFeedbackInfo&&(t=t.transformFeedbackInfo),r.attribs&&(r=r.attribs),r){var o=t[n];if(o){var a=r[n];a.offset?e.bindBufferRange(e.TRANSFORM_FEEDBACK_BUFFER,o.index,a.buffer,a.offset,a.size):e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,o.index,a.buffer)}}}function N(n,o){for(var e=n.getProgramParameter(o,n.ACTIVE_UNIFORMS),a=[],i=[],t=0;t<e;++t){i.push(t),a.push({});var r=n.getActiveUniform(o,t);if(B(r))break;a[t].name=r.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(e){var t=e[0],r=e[1];n.getActiveUniforms(o,i,n[t]).forEach(function(e,t){a[t][r]=e})});for(var u={},s=n.getProgramParameter(o,n.ACTIVE_UNIFORM_BLOCKS),c=0;c<s;++c){var f=n.getActiveUniformBlockName(o,c),l={index:c,usedByVertexShader:n.getActiveUniformBlockParameter(o,c,n.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER),usedByFragmentShader:n.getActiveUniformBlockParameter(o,c,n.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER),size:n.getActiveUniformBlockParameter(o,c,n.UNIFORM_BLOCK_DATA_SIZE),uniformIndices:n.getActiveUniformBlockParameter(o,c,n.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES)};l.used=l.usedByVertexSahder||l.usedByFragmentShader,u[f]=l}return{blockSpecs:u,uniformData:a}}var D=/\[\d+\]\.$/;function z(e,t,r,n){var o=r.blockSpecs,i=r.uniformData,a=o[n];if(!a)return p("no uniform block object named:",n),{name:n,uniforms:{}};var u=new ArrayBuffer(a.size),s=e.createBuffer(),c=a.index;e.bindBuffer(e.UNIFORM_BUFFER,s),e.uniformBlockBinding(t,a.index,c);var f=n+".";D.test(f)&&(f=f.replace(D,"."));var l={};return a.uniformIndices.forEach(function(e){var t=i[e],r=h[t.type],n=r.Type,o=t.size*r.size,a=t.name;a.substr(0,f.length)===f&&(a=a.substr(f.length)),l[a]=new n(u,t.offset,o/n.BYTES_PER_ELEMENT)}),{name:n,array:u,asFloat:new Float32Array(u),buffer:s,uniforms:l}}function k(e,t,r){var n=(t.uniformBlockSpec||t).blockSpecs[r.name];if(n){var o=n.index;return e.bindBufferRange(e.UNIFORM_BUFFER,o,r.buffer,r.offset||0,r.array.byteLength),!0}return!1}function G(e,t){for(var r={},n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),o=0;o<n;++o){var a=e.getActiveAttrib(t,o);if(!B(a)){var i=e.getAttribLocation(t,a.name),u=x[a.type],s=u.setter(e,i,u);s.location=i,r[a.name]=s}}return r}function X(e,t){for(var r in t){var n=e[r];n&&n(t[r])}}function V(e,t){var r={program:t,uniformSetters:C(e,t),attribSetters:G(e,t)};return s.isWebGL2(e)&&(r.uniformBlockSpec=N(e,t),r.transformFeedbackInfo=j(e,t)),r}},"./src/textures.js":function(e,t,r){t.__esModule=!0,t.setTextureDefaults_=function(e){l.copyExistingProperties(e,x),e.textureColor&&j(e.textureColor)},t.createSampler=Y,t.createSamplers=function(t,r){var n={};return Object.keys(r).forEach(function(e){n[e]=Y(t,r[e])}),n},t.setSamplerParameters=V,t.createTexture=ue,t.setEmptyTexture=ie,t.setTextureFromArray=ae,t.loadTextureFromUrl=re,t.setTextureFromElement=Z,t.setTextureFilteringForSize=W,t.setTextureParameters=X,t.setDefaultTextureColor=j,t.createTextures=function(r,o,e){e=e||Q;var a=0,i=[],u={},s={};function c(){0===a&&setTimeout(function(){e(i.length?i:void 0,u,s)},0)}return Object.keys(o).forEach(function(n){var e,t=o[n];!function(e){return"string"==typeof e||Array.isArray(e)&&"string"==typeof e[0]}(t.src)||(e=function(e,t,r){s[n]=r,--a,e&&i.push(e),c()},++a),u[n]=ue(r,t,e)}),c(),u},t.resizeTexture=function(e,t,r,n,o){n=n||r.width,o=o||r.height;var a=r.target||e.TEXTURE_2D;e.bindTexture(a,t);var i,u=r.level||0,s=r.internalFormat||r.format||e.RGBA,c=O(s),f=r.format||c.format,l=r.src;i=l&&(_(l)||Array.isArray(l)&&"number"==typeof l[0])?r.type||B(e,l,c.type):r.type||c.type;if(a===e.TEXTURE_CUBE_MAP)for(var p=0;p<6;++p)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+p,u,s,n,o,0,f,i,null);else e.texImage2D(a,u,s,n,o,0,f,i,null)},t.canGenerateMipmap=S,t.canFilter=U,t.getNumComponentsForFormat=function(e){var t=T[e];if(t)return t.numColorComponents;throw"unknown format: "+e},t.getBytesPerElementForInternalFormat=w,t.getFormatAndTypeForInternalFormat=O;var E=n(r("./src/utils.js")),g=n(r("./src/typedarrays.js")),l=n(r("./src/helper.js"));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}var x={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},_=g.isArrayBuffer,P="undefined"!=typeof document&&document.createElement?document.createElement("canvas").getContext("2d"):null,o=6407,a=6408,i=5120,u=5121,s=5123,c=5125,f=5126,p=5131,h=36193,m=33319,d=33320,v=6403,y=36244,b=36248,A=36249,T={},R=T;R[6406]={numColorComponents:1},R[6409]={numColorComponents:1},R[6410]={numColorComponents:2},R[o]={numColorComponents:3},R[a]={numColorComponents:4},R[v]={numColorComponents:1},R[y]={numColorComponents:1},R[m]={numColorComponents:2},R[d]={numColorComponents:2},R[o]={numColorComponents:3},R[b]={numColorComponents:3},R[a]={numColorComponents:4},R[A]={numColorComponents:4},R[6402]={numColorComponents:1},R[34041]={numColorComponents:2};var M={},F=M;function w(e,t){var r=M[e];if(!r)throw"unknown internal format";var n=r.bytesPerElementMap[t];if(void 0===n)throw"unknown internal format";return n}function O(e){var t=M[e];if(!t)throw"unknown internal format";return{format:t.textureFormat,type:t.type[0]}}function I(e){return 0==(e&e-1)}function S(e,t,r,n){if(!E.isWebGL2(e))return I(t)&&I(r);var o=M[n];if(!o)throw"unknown internal format";return o.colorRenderable&&o.textureFilterable}function U(e){var t=M[e];if(!t)throw"unknown internal format";return t.textureFilterable}function B(e,t,r){return _(t)?g.getGLTypeForTypedArray(t):r||e.UNSIGNED_BYTE}function C(e,t,r,n,o){if(o%1!=0)throw"can't guess dimensions";if(r||n){if(n){if(!r&&(r=o/n)%1)throw"can't guess dimensions"}else if((n=o/r)%1)throw"can't guess dimensions"}else{var a=Math.sqrt(o/(t===e.TEXTURE_CUBE_MAP?6:1));n=a%1==0?r=a:(r=o,1)}return{width:r,height:n}}function j(e){x.textureColor=new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}F[6406]={textureFormat:6406,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[u,p,h,f]},F[6409]={textureFormat:6409,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[u,p,h,f]},F[6410]={textureFormat:6410,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[u,p,h,f]},F[o]={textureFormat:o,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[u,p,h,f,33635]},F[a]={textureFormat:a,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[u,p,h,f,32819,32820]},F[33321]={textureFormat:v,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[u]},F[36756]={textureFormat:v,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[i]},F[33325]={textureFormat:v,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[f,p]},F[33326]={textureFormat:v,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[f]},F[33330]={textureFormat:y,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[u]},F[33329]={textureFormat:y,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[i]},F[33332]={textureFormat:y,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[s]},F[33331]={textureFormat:y,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[5122]},F[33334]={textureFormat:y,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[c]},F[33333]={textureFormat:y,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5124]},F[33323]={textureFormat:m,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[u]},F[36757]={textureFormat:m,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[i]},F[33327]={textureFormat:m,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[f,p]},F[33328]={textureFormat:m,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[f]},F[33336]={textureFormat:d,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[u]},F[33335]={textureFormat:d,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[i]},F[33338]={textureFormat:d,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[s]},F[33337]={textureFormat:d,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5122]},F[33340]={textureFormat:d,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[c]},F[33339]={textureFormat:d,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[5124]},F[32849]={textureFormat:o,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[u]},F[35905]={textureFormat:o,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[u]},F[36194]={textureFormat:o,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[u,33635]},F[36758]={textureFormat:o,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[i]},F[35898]={textureFormat:o,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[f,p,35899]},F[35901]={textureFormat:o,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[f,p,35902]},F[34843]={textureFormat:o,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[f,p]},F[34837]={textureFormat:o,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[f]},F[36221]={textureFormat:b,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[u]},F[36239]={textureFormat:b,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[i]},F[36215]={textureFormat:b,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[s]},F[36233]={textureFormat:b,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[5122]},F[36209]={textureFormat:b,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[c]},F[36227]={textureFormat:b,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[5124]},F[32856]={textureFormat:a,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[u]},F[35907]={textureFormat:a,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[u]},F[36759]={textureFormat:a,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[i]},F[32855]={textureFormat:a,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[u,32820,33640]},F[32854]={textureFormat:a,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[u,32819]},F[32857]={textureFormat:a,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[33640]},F[34842]={textureFormat:a,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[f,p]},F[34836]={textureFormat:a,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[f]},F[36220]={textureFormat:A,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[u]},F[36238]={textureFormat:A,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[i]},F[36975]={textureFormat:A,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[33640]},F[36214]={textureFormat:A,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[s]},F[36232]={textureFormat:A,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[5122]},F[36226]={textureFormat:A,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[5124]},F[36208]={textureFormat:A,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[c]},F[33189]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[s,c]},F[33190]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[c]},F[36012]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[f]},F[35056]={textureFormat:34041,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[34042]},F[36013]={textureFormat:34041,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[36269]},Object.keys(F).forEach(function(e){var n=F[e];n.bytesPerElementMap={},n.bytesPerElement.forEach(function(e,t){var r=n.type[t];n.bytesPerElementMap[r]=e})});var L={};function N(e,t){void 0!==t.colorspaceConversion&&(L.colorspaceConversion=e.getParameter(e.UNPACK_COLORSPACE_CONVERSION_WEBGL),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.colorspaceConversion)),void 0!==t.premultiplyAlpha&&(L.premultiplyAlpha=e.getParameter(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha)),void 0!==t.flipY&&(L.flipY=e.getParameter(e.UNPACK_FLIP_Y_WEBGL),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY))}function D(e,t){void 0!==t.colorspaceConversion&&e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,L.colorspaceConversion),void 0!==t.premultiplyAlpha&&e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,L.premultiplyAlpha),void 0!==t.flipY&&e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,L.flipY)}function z(e){L.unpackAlignment=e.getParameter(e.UNPACK_ALIGNMENT),E.isWebGL2(e)&&(L.unpackRowLength=e.getParameter(e.UNPACK_ROW_LENGTH),L.unpackImageHeight=e.getParameter(e.UNPACK_IMAGE_HEIGHT),L.unpackSkipPixels=e.getParameter(e.UNPACK_SKIP_PIXELS),L.unpackSkipRows=e.getParameter(e.UNPACK_SKIP_ROWS),L.unpackSkipImages=e.getParameter(e.UNPACK_SKIP_IMAGES))}function k(e){e.pixelStorei(e.UNPACK_ALIGNMENT,L.unpackAlignment),E.isWebGL2(e)&&(e.pixelStorei(e.UNPACK_ROW_LENGTH,L.unpackRowLength),e.pixelStorei(e.UNPACK_IMAGE_HEIGHT,L.unpackImageHeight),e.pixelStorei(e.UNPACK_SKIP_PIXELS,L.unpackSkipPixels),e.pixelStorei(e.UNPACK_SKIP_ROWS,L.unpackSkipRows),e.pixelStorei(e.UNPACK_SKIP_IMAGES,L.unpackSkipImages))}function G(e,t,r,n){n.minMag&&(r.call(e,t,e.TEXTURE_MIN_FILTER,n.minMag),r.call(e,t,e.TEXTURE_MAG_FILTER,n.minMag)),n.min&&r.call(e,t,e.TEXTURE_MIN_FILTER,n.min),n.mag&&r.call(e,t,e.TEXTURE_MAG_FILTER,n.mag),n.wrap&&(r.call(e,t,e.TEXTURE_WRAP_S,n.wrap),r.call(e,t,e.TEXTURE_WRAP_T,n.wrap),t!==e.TEXTURE_3D&&!l.isSampler(e,t)||r.call(e,t,e.TEXTURE_WRAP_R,n.wrap)),n.wrapR&&r.call(e,t,e.TEXTURE_WRAP_R,n.wrapR),n.wrapS&&r.call(e,t,e.TEXTURE_WRAP_S,n.wrapS),n.wrapT&&r.call(e,t,e.TEXTURE_WRAP_T,n.wrapT),n.minLod&&r.call(e,t,e.TEXTURE_MIN_LOD,n.minLod),n.maxLod&&r.call(e,t,e.TEXTURE_MAX_LOD,n.maxLod),n.baseLevel&&r.call(e,t,e.TEXTURE_BASE_LEVEL,n.baseLevel),n.maxLevel&&r.call(e,t,e.TEXTURE_MAX_LEVEL,n.maxLevel)}function X(e,t,r){var n=r.target||e.TEXTURE_2D;e.bindTexture(n,t),G(e,n,e.texParameteri,r)}function V(e,t,r){G(e,t,e.samplerParameteri,r)}function Y(e,t){var r=e.createSampler();return V(e,r,t),r}function W(e,t,r,n,o,a,i){r=r||x.textureOptions,a=a||e.RGBA,i=i||e.UNSIGNED_BYTE;var u=r.target||e.TEXTURE_2D;if(n=n||r.width,o=o||r.height,e.bindTexture(u,t),S(e,n,o,a))e.generateMipmap(u);else{var s=U(a)?e.LINEAR:e.NEAREST;e.texParameteri(u,e.TEXTURE_MIN_FILTER,s),e.texParameteri(u,e.TEXTURE_MAG_FILTER,s),e.texParameteri(u,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(u,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}}function K(e){return!0===e.auto||void 0===e.auto&&void 0===e.level}function q(e,t){return(t=t||{}).cubeFaceOrder||[e.TEXTURE_CUBE_MAP_POSITIVE_X,e.TEXTURE_CUBE_MAP_NEGATIVE_X,e.TEXTURE_CUBE_MAP_POSITIVE_Y,e.TEXTURE_CUBE_MAP_NEGATIVE_Y,e.TEXTURE_CUBE_MAP_POSITIVE_Z,e.TEXTURE_CUBE_MAP_NEGATIVE_Z]}function H(e,t){var r=q(e,t).map(function(e,t){return{face:e,ndx:t}});return r.sort(function(e,t){return e.face-t.face}),r}function Z(n,o,a,i){var u=(i=i||x.textureOptions).target||n.TEXTURE_2D,s=i.level||0,c=a.width,f=a.height,l=i.internalFormat||i.format||n.RGBA,e=O(l),p=i.format||e.format,h=i.type||e.type;if(N(n,i),n.bindTexture(u,o),u===n.TEXTURE_CUBE_MAP){var m,d,t=a.width,r=a.height;if(t/6===r)m=r,d=[0,0,1,0,2,0,3,0,4,0,5,0];else if(r/6===t)m=t,d=[0,0,0,1,0,2,0,3,0,4,0,5];else if(t/3==r/2)m=t/3,d=[0,0,1,0,2,0,0,1,1,1,2,1];else{if(t/2!=r/3)throw"can't figure out cube map from element: "+(a.src?a.src:a.nodeName);m=t/2,d=[0,0,1,0,0,1,1,1,0,2,1,2]}P?(P.canvas.width=m,P.canvas.height=m,f=c=m,H(n,i).forEach(function(e){var t=d[2*e.ndx+0]*m,r=d[2*e.ndx+1]*m;P.drawImage(a,t,r,m,m,0,0,m,m),n.texImage2D(e.face,s,l,p,h,P.canvas)}),P.canvas.width=1,P.canvas.height=1):"undefined"!=typeof createImageBitmap&&(f=c=m,H(n,i).forEach(function(t){var e=d[2*t.ndx+0]*m,r=d[2*t.ndx+1]*m;n.texImage2D(t.face,s,l,m,m,0,p,h,null),createImageBitmap(a,e,r,m,m,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(e){N(n,i),n.bindTexture(u,o),n.texImage2D(t.face,s,l,p,h,e),D(n,i),K(i)&&W(n,o,i,c,f,l,h)})}))}else if(u===n.TEXTURE_3D||u===n.TEXTURE_2D_ARRAY){var v=Math.min(a.width,a.height),y=Math.max(a.width,a.height),b=y/v;if(b%1!=0)throw"can not compute 3D dimensions of element";var E=a.width===y?1:0,g=a.height===y?1:0;z(n),n.pixelStorei(n.UNPACK_ALIGNMENT,1),n.pixelStorei(n.UNPACK_ROW_LENGTH,a.width),n.pixelStorei(n.UNPACK_IMAGE_HEIGHT,0),n.pixelStorei(n.UNPACK_SKIP_IMAGES,0),n.texImage3D(u,s,l,v,v,v,0,p,h,null);for(var _=0;_<b;++_){var A=_*v*E,T=_*v*g;n.pixelStorei(n.UNPACK_SKIP_PIXELS,A),n.pixelStorei(n.UNPACK_SKIP_ROWS,T),n.texSubImage3D(u,s,0,0,_,v,v,1,p,h,a)}k(n)}else n.texImage2D(u,s,l,p,h,a);D(n,i),K(i)&&W(n,o,i,c,f,l,h),X(n,o,i)}function Q(){}function J(e,t){return void 0!==t||function(e){if("undefined"!=typeof document){var t=document.createElement("a");return t.href=e,t.hostname===location.hostname&&t.port===location.port&&t.protocol===location.protocol}var r=new URL(location.href).origin;return new URL(e,location.href).origin===r}(e)?t:"anonymous"}function $(e){return"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof ImageData&&e instanceof ImageData||"undefined"!=typeof HTMLElement&&e instanceof HTMLElement}function ee(e,t,r){return $(e)?(setTimeout(function(){r(null,e)}),e):function(t,e,r){var n;if(r=r||Q,e=void 0!==e?e:x.crossOrigin,e=J(t,e),"undefined"!=typeof Image){n=new Image,void 0!==e&&(n.crossOrigin=e);var o=function(){n.removeEventListener("error",a),n.removeEventListener("load",i),n=null},a=function(){var e="couldn't load image: "+t;l.error(e),r(e,n),o()},i=function(){r(null,n),o()};return n.addEventListener("error",a),n.addEventListener("load",i),n.src=t,n}if("undefined"!=typeof ImageBitmap){var u,s,c=function(){r(u,s)},f={};e&&(f.mode="cors"),fetch(t,f).then(function(e){if(!e.ok)throw e;return e.blob()}).then(function(e){return createImageBitmap(e,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(e){s=e,setTimeout(c)}).catch(function(e){u=e,setTimeout(c)}),n=null}return n}(e,t,r)}function te(e,t,r){var n=(r=r||x.textureOptions).target||e.TEXTURE_2D;if(e.bindTexture(n,t),!1!==r.color){var o=function(e){return e=e||x.textureColor,_(e)?e:new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}(r.color);if(n===e.TEXTURE_CUBE_MAP)for(var a=0;a<6;++a)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+a,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,o);else n===e.TEXTURE_3D||n===e.TEXTURE_2D_ARRAY?e.texImage3D(n,0,e.RGBA,1,1,1,0,e.RGBA,e.UNSIGNED_BYTE,o):e.texImage2D(n,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,o)}}function re(r,n,o,a){return a=a||Q,o=o||x.textureOptions,te(r,n,o),ee((o=Object.assign({},o)).src,o.crossOrigin,function(e,t){e?a(e,n,t):(Z(r,n,t,o),a(null,n,t))})}function ne(n,o,a,i){i=i||Q;var e=a.src;if(6!==e.length)throw"there must be 6 urls for a cubemap";var u=a.level||0,s=a.internalFormat||a.format||n.RGBA,t=O(s),c=a.format||t.format,f=a.type||n.UNSIGNED_BYTE,l=a.target||n.TEXTURE_2D;if(l!==n.TEXTURE_CUBE_MAP)throw"target must be TEXTURE_CUBE_MAP";te(n,o,a),a=Object.assign({},a);var p,h=6,m=[],r=q(n,a);p=e.map(function(e,t){return ee(e,a.crossOrigin,function(r){return function(e,t){--h,e?m.push(e):t.width!==t.height?m.push("cubemap face img is not a square: "+t.src):(N(n,a),n.bindTexture(l,o),5===h?q(n).forEach(function(e){n.texImage2D(e,u,s,c,f,t)}):n.texImage2D(r,u,s,c,f,t),D(n,a),K(a)&&n.generateMipmap(l)),0===h&&i(m.length?m:void 0,o,p)}}(r[t]))})}function oe(a,i,u,s){s=s||Q;var e=u.src,c=u.internalFormat||u.format||a.RGBA,t=O(c),f=u.format||t.format,l=u.type||a.UNSIGNED_BYTE,p=u.target||a.TEXTURE_2D_ARRAY;if(p!==a.TEXTURE_3D&&p!==a.TEXTURE_2D_ARRAY)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";te(a,i,u),u=Object.assign({},u);var h,m=e.length,d=[],v=u.level||0,y=u.width,b=u.height,E=e.length,g=!0;h=e.map(function(e,t){return ee(e,u.crossOrigin,function(o){return function(e,t){if(--m,e)d.push(e);else{if(N(a,u),a.bindTexture(p,i),g){g=!1,y=u.width||t.width,b=u.height||t.height,a.texImage3D(p,v,c,y,b,E,0,f,l,null);for(var r=0;r<E;++r)a.texSubImage3D(p,v,0,0,r,y,b,1,f,l,t)}else{var n=t;t.width===y&&t.height===b||(n=P.canvas,P.canvas.width=y,P.canvas.height=b,P.drawImage(t,0,0,y,b)),a.texSubImage3D(p,v,0,0,o,y,b,1,f,l,n),n===P.canvas&&(P.canvas.width=0,P.canvas.height=0)}D(a,u),K(u)&&a.generateMipmap(p)}0===m&&s(d.length?d:void 0,i,h)}}(t))})}function ae(n,e,o,t){var r=(t=t||x.textureOptions).target||n.TEXTURE_2D;n.bindTexture(r,e);var a=t.width,i=t.height,u=t.depth,s=t.level||0,c=t.internalFormat||t.format||n.RGBA,f=O(c),l=t.format||f.format,p=t.type||B(n,o,f.type);if(_(o))o instanceof Uint8ClampedArray&&(o=new Uint8Array(o.buffer));else{var h=g.getTypedArrayTypeForGLType(p);o=new h(o)}var m,d=w(c,p),v=o.byteLength/d;if(v%1)throw"length wrong size for format: "+E.glEnumToString(n,l);if(r===n.TEXTURE_3D)if(a||i||u)!a||i&&u?!i||a&&u?(m=C(n,r,a,i,v/u),a=m.width,i=m.height):(m=C(n,r,a,u,v/i),a=m.width,u=m.height):(m=C(n,r,i,u,v/a),i=m.width,u=m.height);else{var y=Math.cbrt(v);if(y%1!=0)throw"can't guess cube size of array of numElements: "+v;u=i=a=y}else m=C(n,r,a,i,v),a=m.width,i=m.height;if(z(n),n.pixelStorei(n.UNPACK_ALIGNMENT,t.unpackAlignment||1),N(n,t),r===n.TEXTURE_CUBE_MAP){var b=v/6*(d/o.BYTES_PER_ELEMENT);H(n,t).forEach(function(e){var t=b*e.ndx,r=o.subarray(t,t+b);n.texImage2D(e.face,s,c,a,i,0,l,p,r)})}else r===n.TEXTURE_3D?n.texImage3D(r,s,c,a,i,u,0,l,p,o):n.texImage2D(r,s,c,a,i,0,l,p,o);return D(n,t),k(n),{width:a,height:i,depth:u,type:p}}function ie(e,t,r){var n=r.target||e.TEXTURE_2D;e.bindTexture(n,t);var o=r.level||0,a=r.internalFormat||r.format||e.RGBA,i=O(a),u=r.format||i.format,s=r.type||i.type;if(N(e,r),n===e.TEXTURE_CUBE_MAP)for(var c=0;c<6;++c)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+c,o,a,r.width,r.height,0,u,s,null);else n===e.TEXTURE_3D?e.texImage3D(n,o,a,r.width,r.height,r.depth,0,u,s,null):e.texImage2D(n,o,a,r.width,r.height,0,u,s,null);D(e,r)}function ue(e,t,r){r=r||Q,t=t||x.textureOptions;var n=e.createTexture(),o=t.target||e.TEXTURE_2D,a=t.width||1,i=t.height||1,u=t.internalFormat||e.RGBA,s=O(u),c=t.type||s.type;e.bindTexture(o,n),o===e.TEXTURE_CUBE_MAP&&(e.texParameteri(o,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(o,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE));var f=t.src;if(f)if("function"==typeof f&&(f=f(e,t)),"string"==typeof f)re(e,n,t,r);else if(_(f)||Array.isArray(f)&&("number"==typeof f[0]||Array.isArray(f[0])||_(f[0]))){var l=ae(e,n,f,t);a=l.width,i=l.height,c=l.type}else if(Array.isArray(f)&&("string"==typeof f[0]||$(f[0])))o===e.TEXTURE_CUBE_MAP?ne(e,n,t,r):oe(e,n,t,r);else{if(!$(f))throw"unsupported src type";Z(e,n,f,t),a=f.width,i=f.height}else ie(e,n,t);return K(t)&&W(e,n,t,a,i,u,c),X(e,n,t),n}},"./src/twgl-full.js":function(e,t,r){var n={m4:t.__esModule=!0,v3:!0,primitives:!0};t.primitives=t.v3=t.m4=void 0;var o=s(r("./src/m4.js"));t.m4=o;var a=s(r("./src/v3.js"));t.v3=a;var i=s(r("./src/primitives.js"));t.primitives=i;var u=r("./src/twgl.js");function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(t[e]=u[e]))})},"./src/twgl.js":function(e,t,r){var n={addExtensionsToContext:t.__esModule=!0,getContext:!0,getWebGLContext:!0,resizeCanvasToDisplaySize:!0,setDefaults:!0};t.addExtensionsToContext=b,t.getContext=function(e,t){return function(e,t){for(var r=["webgl2","webgl","experimental-webgl"],n=null,o=0;o<r.length;++o)if(n=e.getContext(r[o],t)){m.addExtensionsToContext&&b(n);break}return n}(e,t)},t.getWebGLContext=function(e,t){return function(e,t){for(var r=["webgl","experimental-webgl"],n=null,o=0;o<r.length;++o)if(n=e.getContext(r[o],t)){m.addExtensionsToContext&&b(n);break}return n}(e,t)},t.resizeCanvasToDisplaySize=function(e,t){t=t||1,t=Math.max(0,t);var r=e.clientWidth*t|0,n=e.clientHeight*t|0;return(e.width!==r||e.height!==n)&&(e.width=r,e.height=n,!0)},t.setDefaults=function(e){l.copyExistingProperties(e,m),o.setAttributeDefaults_(e),a.setTextureDefaults_(e)};var o=h(r("./src/attributes.js"));Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(t[e]=o[e]))});var a=h(r("./src/textures.js"));Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(t[e]=a[e]))});var l=h(r("./src/helper.js")),p=h(r("./src/utils.js"));Object.keys(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(t[e]=p[e]))});var i=r("./src/draw.js");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(t[e]=i[e]))});var u=r("./src/framebuffers.js");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(t[e]=u[e]))});var s=r("./src/programs.js");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(t[e]=s[e]))});var c=r("./src/typedarrays.js");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(t[e]=c[e]))});var f=r("./src/vertex-arrays.js");function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(t[e]=f[e]))});var m={addExtensionsToContext:!0};var d=/^(.*?)_/;function v(e,t){p.glEnumToString(e,0);var r=e.getExtension(t);if(r){var n={},o=d.exec(t)[1],a="_"+o;for(var i in r){var u=r[i],s="function"==typeof u,c=s?o:a,f=i;i.endsWith(c)&&(f=i.substring(0,i.length-c.length)),void 0!==e[f]?s||e[f]===u||l.warn(f,e[f],u,i):s?e[f]=function(e){return function(){return e.apply(r,arguments)}}(u):(e[f]=u,n[f]=u)}n.constructor={name:r.constructor.name},p.glEnumToString(n,0)}return r}var y=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"];function b(e){for(var t=0;t<y.length;++t)v(e,y[t])}},"./src/typedarrays.js":function(e,t){t.__esModule=!0,t.getGLTypeForTypedArray=function(e){if(e instanceof Int8Array)return r;if(e instanceof Uint8Array)return n;if(e instanceof Uint8ClampedArray)return n;if(e instanceof Int16Array)return o;if(e instanceof Uint16Array)return a;if(e instanceof Int32Array)return i;if(e instanceof Uint32Array)return u;if(e instanceof Float32Array)return s;throw"unsupported typed array type"},t.getGLTypeForTypedArrayType=function(e){if(e===Int8Array)return r;if(e===Uint8Array)return n;if(e===Uint8ClampedArray)return n;if(e===Int16Array)return o;if(e===Uint16Array)return a;if(e===Int32Array)return i;if(e===Uint32Array)return u;if(e!==Float32Array)throw"unsupported typed array type";return s},t.getTypedArrayTypeForGLType=function(e){var t=c[e];if(t)return t;throw"unknown gl type"},t.isArrayBuffer=void 0;var r=5120,n=5121,o=5122,a=5123,i=5124,u=5125,s=5126,c={},f=c;f[r]=Int8Array,f[n]=Uint8Array,f[o]=Int16Array,f[a]=Uint16Array,f[i]=Int32Array,f[u]=Uint32Array,f[s]=Float32Array,f[32819]=Uint16Array,f[32820]=Uint16Array,f[33635]=Uint16Array,f[5131]=Uint16Array,f[33640]=Uint32Array,f[35899]=Uint32Array,f[35902]=Uint32Array,f[36269]=Uint32Array,f[34042]=Uint32Array;var l="undefined"!=typeof SharedArrayBuffer?function(e){return e&&e.buffer&&(e.buffer instanceof ArrayBuffer||e.buffer instanceof SharedArrayBuffer)}:function(e){return e&&e.buffer&&e.buffer instanceof ArrayBuffer};t.isArrayBuffer=l},"./src/utils.js":function(e,t){t.__esModule=!0,t.isWebGL1=function(e){return!e.texStorage2D},t.isWebGL2=function(e){return!!e.texStorage2D},t.glEnumToString=void 0;var o,a,r=(o={},a={},function(e,t){return function(e){var t=e.constructor.name;if(!o[t]){for(var r in e)if("number"==typeof e[r]){var n=a[e[r]];a[e[r]]=n?"".concat(n," | ").concat(r):r}o[t]=!0}}(e),a[t]||"0x"+t.toString(16)});t.glEnumToString=r},"./src/v3.js":function(e,t){t.__esModule=!0,t.add=function(e,t,r){return(r=r||new a(3))[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r},t.copy=function(e,t){return(t=t||new a(3))[0]=e[0],t[1]=e[1],t[2]=e[2],t},t.create=function(e,t,r){var n=new a(3);e&&(n[0]=e);t&&(n[1]=t);r&&(n[2]=r);return n},t.cross=function(e,t,r){r=r||new a(3);var n=e[2]*t[0]-e[0]*t[2],o=e[0]*t[1]-e[1]*t[0];return r[0]=e[1]*t[2]-e[2]*t[1],r[1]=n,r[2]=o,r},t.distance=function(e,t){var r=e[0]-t[0],n=e[1]-t[1],o=e[2]-t[2];return Math.sqrt(r*r+n*n+o*o)},t.distanceSq=function(e,t){var r=e[0]-t[0],n=e[1]-t[1],o=e[2]-t[2];return r*r+n*n+o*o},t.divide=function(e,t,r){return(r=r||new a(3))[0]=e[0]/t[0],r[1]=e[1]/t[1],r[2]=e[2]/t[2],r},t.divScalar=function(e,t,r){return(r=r||new a(3))[0]=e[0]/t,r[1]=e[1]/t,r[2]=e[2]/t,r},t.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},t.lerp=function(e,t,r,n){return(n=n||new a(3))[0]=e[0]+r*(t[0]-e[0]),n[1]=e[1]+r*(t[1]-e[1]),n[2]=e[2]+r*(t[2]-e[2]),n},t.lerpV=function(e,t,r,n){return(n=n||new a(3))[0]=e[0]+r[0]*(t[0]-e[0]),n[1]=e[1]+r[1]*(t[1]-e[1]),n[2]=e[2]+r[2]*(t[2]-e[2]),n},t.length=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])},t.lengthSq=function(e){return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]},t.max=function(e,t,r){return(r=r||new a(3))[0]=Math.max(e[0],t[0]),r[1]=Math.max(e[1],t[1]),r[2]=Math.max(e[2],t[2]),r},t.min=function(e,t,r){return(r=r||new a(3))[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.min(e[2],t[2]),r},t.mulScalar=function(e,t,r){return(r=r||new a(3))[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r},t.multiply=function(e,t,r){return(r=r||new a(3))[0]=e[0]*t[0],r[1]=e[1]*t[1],r[2]=e[2]*t[2],r},t.negate=function(e,t){return(t=t||new a(3))[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},t.normalize=function(e,t){t=t||new a(3);var r=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=Math.sqrt(r);1e-5<n?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=0,t[1]=0,t[2]=0);return t},t.setDefaultType=function(e){var t=a;return a=e,t},t.subtract=function(e,t,r){return(r=r||new a(3))[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r};var a=Float32Array},"./src/vertex-arrays.js":function(e,t,r){t.__esModule=!0,t.createVertexArrayInfo=function(t,e,r){var n=t.createVertexArray();t.bindVertexArray(n),e.length||(e=[e]);return e.forEach(function(e){a.setBuffersAndAttributes(t,e,r)}),t.bindVertexArray(null),{numElements:r.numElements,elementType:r.elementType,vertexArrayObject:n}},t.createVAOAndSetAttributes=n,t.createVAOFromBufferInfo=function(e,t,r){return n(e,t.attribSetters||t,r.attribs,r.indices)};var a=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r("./src/programs.js"));function n(e,t,r,n){var o=e.createVertexArray();return e.bindVertexArray(o),a.setAttributes(t,r),n&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n),e.bindVertexArray(null),o}}},o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s="./src/twgl-full.js");function o(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}var r,n},e.exports=t()})),T=1e-6,o="undefined"!=typeof Float32Array?Float32Array:Array,a=Math.random;Math.PI;function b(){var e=new o(16);return o!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function E(e,t,r,n){var o,a,i,u,s,c,f,l,p,h,m=t[0],d=t[1],v=t[2],y=n[0],b=n[1],E=n[2],g=r[0],_=r[1],A=r[2];return Math.abs(m-g)<T&&Math.abs(d-_)<T&&Math.abs(v-A)<T?function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}(e):(f=m-g,l=d-_,p=v-A,o=b*(p*=h=1/Math.sqrt(f*f+l*l+p*p))-E*(l*=h),a=E*(f*=h)-y*p,i=y*l-b*f,(h=Math.sqrt(o*o+a*a+i*i))?(o*=h=1/h,a*=h,i*=h):i=a=o=0,u=l*i-p*a,s=p*o-f*i,c=f*a-l*o,(h=Math.sqrt(u*u+s*s+c*c))?(u*=h=1/h,s*=h,c*=h):c=s=u=0,e[0]=o,e[1]=u,e[2]=f,e[3]=0,e[4]=a,e[5]=s,e[6]=l,e[7]=0,e[8]=i,e[9]=c,e[10]=p,e[11]=0,e[12]=-(o*m+a*d+i*v),e[13]=-(u*m+s*d+c*v),e[14]=-(f*m+l*d+p*v),e[15]=1,e)}function g(){var e=new o(3);return o!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function _(e){var t=e[0],r=e[1],n=e[2];return Math.sqrt(t*t+r*r+n*n)}function A(e,t,r){var n=new o(3);return n[0]=e,n[1]=t,n[2]=r,n}function x(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function u(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function P(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function i(e,t){var r=t[0],n=t[1],o=t[2],a=r*r+n*n+o*o;return 0<a&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e}function s(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function c(e,t,r){var n=t[0],o=t[1],a=t[2],i=r[0],u=r[1],s=r[2];return e[0]=o*s-a*u,e[1]=a*i-n*s,e[2]=n*u-o*i,e}function R(e,t){t=t||1;var r=2*a()*Math.PI,n=2*a()-1,o=Math.sqrt(1-n*n)*t;return e[0]=Math.cos(r)*o,e[1]=Math.sin(r)*o,e[2]=n*t,e}function M(e,t,r,n){var o=[],a=[];return o[0]=t[0]-r[0],o[1]=t[1]-r[1],o[2]=t[2]-r[2],a[0]=o[2]*Math.sin(n)+o[0]*Math.cos(n),a[1]=o[1],a[2]=o[2]*Math.cos(n)-o[0]*Math.sin(n),e[0]=a[0]+r[0],e[1]=a[1]+r[1],e[2]=a[2]+r[2],e}var n,f=_;n=g();function l(e,t,r){this.obj=e,this.left=null,this.right=null,this.parent=r,this.dimension=t}function F(e,h,m){var t,a=this;Array.isArray(e)?this.root=function e(t,r,n){var o,a,i=r%m.length;return 0===t.length?null:1===t.length?new l(t[0],i,n):(t.sort(function(e,t){return e[m[i]]-t[m[i]]}),(a=new l(t[o=Math.floor(t.length/2)],i,n)).left=e(t.slice(0,o),r+1,a),a.right=e(t.slice(o+1),r+1,a),a)}(e,0,null):(t=e,a.root=t,function e(t){t.left&&e((t.left.parent=t).left),t.right&&e((t.right.parent=t).right)}(a.root)),this.toJSON=function(e){e||(e=this.root);var t=new l(e.obj,e.dimension,null);return e.left&&(t.left=a.toJSON(e.left)),e.right&&(t.right=a.toJSON(e.right)),t},this.insert=function(o){var e,t,r=function e(t,r){if(null===t)return r;var n=m[t.dimension];return o[n]<t.obj[n]?e(t.left,t):e(t.right,t)}(this.root,null);null!==r?(e=new l(o,(r.dimension+1)%m.length,r),t=m[r.dimension],o[t]<r.obj[t]?r.left=e:r.right=e):this.root=new l(o,0,null)},this.remove=function(n){var e;null!==(e=function e(t){if(null===t)return null;if(t.obj===n)return t;var r=m[t.dimension];return n[r]<t.obj[r]?e(t.left):e(t.right)}(a.root))&&function e(t){var r,n,o;function u(e,t){var r,n,o,a,i;return null===e?null:(r=m[t],e.dimension===t?null!==e.left?u(e.left,t):e:(n=e.obj[r],o=u(e.left,t),a=u(e.right,t),i=e,null!==o&&o.obj[r]<n&&(i=o),null!==a&&a.obj[r]<i.obj[r]&&(i=a),i))}if(null===t.left&&null===t.right)return null===t.parent?void(a.root=null):(o=m[t.parent.dimension],void(t.obj[o]<t.parent.obj[o]?t.parent.left=null:t.parent.right=null));null!==t.right?(n=(r=u(t.right,t.dimension)).obj,e(r)):(n=(r=u(t.left,t.dimension)).obj,e(r),t.right=t.left,t.left=null),t.obj=n}(e)},this.nearest=function(f,l,e){var t,r,p;if(p=new d(function(e){return-e[1]}),e)for(t=0;t<l;t+=1)p.push([null,e]);for(a.root&&function e(t){var r,n,o,a,i=m[t.dimension],u=h(f,t.obj),s={};function c(e,t){p.push([e,t]),p.size()>l&&p.pop()}for(a=0;a<m.length;a+=1)a===t.dimension?s[m[a]]=f[m[a]]:s[m[a]]=t.obj[m[a]];n=h(s,t.obj),null!==t.right||null!==t.left?(e(r=null===t.right?t.left:null===t.left?t.right:f[i]<t.obj[i]?t.left:t.right),(p.size()<l||u<p.peek()[1])&&c(t,u),(p.size()<l||Math.abs(n)<p.peek()[1])&&null!==(o=r===t.left?t.right:t.left)&&e(o)):(p.size()<l||u<p.peek()[1])&&c(t,u)}(a.root),r=[],t=0;t<Math.min(l,p.content.length);t+=1)p.content[t][0]&&r.push([p.content[t][0].obj,p.content[t][1]]);return r},this.balanceFactor=function(){return function e(t){return null===t?0:Math.max(e(t.left),e(t.right))+1}(a.root)/(Math.log(function e(t){return null===t?0:e(t.left)+e(t.right)+1}(a.root))/Math.log(2))}}function d(e){this.content=[],this.scoreFunction=e}d.prototype={push:function(e){this.content.push(e),this.bubbleUp(this.content.length-1)},pop:function(){var e=this.content[0],t=this.content.pop();return 0<this.content.length&&(this.content[0]=t,this.sinkDown(0)),e},peek:function(){return this.content[0]},remove:function(e){for(var t=this.content.length,r=0;r<t;r++)if(this.content[r]==e){var n=this.content.pop();return void(r!=t-1&&(this.content[r]=n,this.scoreFunction(n)<this.scoreFunction(e)?this.bubbleUp(r):this.sinkDown(r)))}throw new Error("Node not found.")},size:function(){return this.content.length},bubbleUp:function(e){for(var t=this.content[e];0<e;){var r=Math.floor((e+1)/2)-1,n=this.content[r];if(!(this.scoreFunction(t)<this.scoreFunction(n)))break;this.content[r]=t,this.content[e]=n,e=r}},sinkDown:function(e){for(var t=this.content.length,r=this.content[e],n=this.scoreFunction(r);;){var o=2*(e+1),a=o-1,i=null;if(a<t){var u=this.content[a],s=this.scoreFunction(u);s<n&&(i=a)}if(o<t){var c=this.content[o];this.scoreFunction(c)<(null==i?n:s)&&(i=o)}if(null==i)break;this.content[e]=this.content[i],this.content[i]=r,e=i}}};var h=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.setMatrixArrayType=function(e){t.ARRAY_TYPE=n=e},t.toRadian=function(e){return e*a},t.equals=function(e,t){return Math.abs(e-t)<=r*Math.max(1,Math.abs(e),Math.abs(t))},t.RANDOM=t.ARRAY_TYPE=t.EPSILON=void 0;var r=1e-6;t.EPSILON=r;var n="undefined"!=typeof Float32Array?Float32Array:Array;t.ARRAY_TYPE=n;var o=Math.random;t.RANDOM=o;var a=Math.PI/180});t(h);h.setMatrixArrayType,h.toRadian,h.equals,h.RANDOM,h.ARRAY_TYPE,h.EPSILON;var p=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.create=function(){var e=new B.ARRAY_TYPE(16);B.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},t.clone=function(e){var t=new B.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.fromValues=function(e,t,r,n,o,a,i,u,s,c,f,l,p,h,m,d){var v=new B.ARRAY_TYPE(16);return v[0]=e,v[1]=t,v[2]=r,v[3]=n,v[4]=o,v[5]=a,v[6]=i,v[7]=u,v[8]=s,v[9]=c,v[10]=f,v[11]=l,v[12]=p,v[13]=h,v[14]=m,v[15]=d,v},t.set=function(e,t,r,n,o,a,i,u,s,c,f,l,p,h,m,d,v){return e[0]=t,e[1]=r,e[2]=n,e[3]=o,e[4]=a,e[5]=i,e[6]=u,e[7]=s,e[8]=c,e[9]=f,e[10]=l,e[11]=p,e[12]=h,e[13]=m,e[14]=d,e[15]=v,e},t.identity=T,t.transpose=function(e,t){if(e===t){var r=t[1],n=t[2],o=t[3],a=t[6],i=t[7],u=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=a,e[11]=t[14],e[12]=o,e[13]=i,e[14]=u}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},t.invert=function(e,t){var r=t[0],n=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=t[6],c=t[7],f=t[8],l=t[9],p=t[10],h=t[11],m=t[12],d=t[13],v=t[14],y=t[15],b=r*u-n*i,E=r*s-o*i,g=r*c-a*i,_=n*s-o*u,A=n*c-a*u,T=o*c-a*s,x=f*d-l*m,P=f*v-p*m,R=f*y-h*m,M=l*v-p*d,F=l*y-h*d,w=p*y-h*v,O=b*w-E*F+g*M+_*R-A*P+T*x;return O?(O=1/O,e[0]=(u*w-s*F+c*M)*O,e[1]=(o*F-n*w-a*M)*O,e[2]=(d*T-v*A+y*_)*O,e[3]=(p*A-l*T-h*_)*O,e[4]=(s*R-i*w-c*P)*O,e[5]=(r*w-o*R+a*P)*O,e[6]=(v*g-m*T-y*E)*O,e[7]=(f*T-p*g+h*E)*O,e[8]=(i*F-u*R+c*x)*O,e[9]=(n*R-r*F-a*x)*O,e[10]=(m*A-d*g+y*b)*O,e[11]=(l*g-f*A-h*b)*O,e[12]=(u*P-i*M-s*x)*O,e[13]=(r*M-n*P+o*x)*O,e[14]=(d*E-m*_-v*b)*O,e[15]=(f*_-l*E+p*b)*O,e):null},t.adjoint=function(e,t){var r=t[0],n=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=t[6],c=t[7],f=t[8],l=t[9],p=t[10],h=t[11],m=t[12],d=t[13],v=t[14],y=t[15];return e[0]=u*(p*y-h*v)-l*(s*y-c*v)+d*(s*h-c*p),e[1]=-(n*(p*y-h*v)-l*(o*y-a*v)+d*(o*h-a*p)),e[2]=n*(s*y-c*v)-u*(o*y-a*v)+d*(o*c-a*s),e[3]=-(n*(s*h-c*p)-u*(o*h-a*p)+l*(o*c-a*s)),e[4]=-(i*(p*y-h*v)-f*(s*y-c*v)+m*(s*h-c*p)),e[5]=r*(p*y-h*v)-f*(o*y-a*v)+m*(o*h-a*p),e[6]=-(r*(s*y-c*v)-i*(o*y-a*v)+m*(o*c-a*s)),e[7]=r*(s*h-c*p)-i*(o*h-a*p)+f*(o*c-a*s),e[8]=i*(l*y-h*d)-f*(u*y-c*d)+m*(u*h-c*l),e[9]=-(r*(l*y-h*d)-f*(n*y-a*d)+m*(n*h-a*l)),e[10]=r*(u*y-c*d)-i*(n*y-a*d)+m*(n*c-a*u),e[11]=-(r*(u*h-c*l)-i*(n*h-a*l)+f*(n*c-a*u)),e[12]=-(i*(l*v-p*d)-f*(u*v-s*d)+m*(u*p-s*l)),e[13]=r*(l*v-p*d)-f*(n*v-o*d)+m*(n*p-o*l),e[14]=-(r*(u*v-s*d)-i*(n*v-o*d)+m*(n*s-o*u)),e[15]=r*(u*p-s*l)-i*(n*p-o*l)+f*(n*s-o*u),e},t.determinant=function(e){var t=e[0],r=e[1],n=e[2],o=e[3],a=e[4],i=e[5],u=e[6],s=e[7],c=e[8],f=e[9],l=e[10],p=e[11],h=e[12],m=e[13],d=e[14],v=e[15];return(t*i-r*a)*(l*v-p*d)-(t*u-n*a)*(f*v-p*m)+(t*s-o*a)*(f*d-l*m)+(r*u-n*i)*(c*v-p*h)-(r*s-o*i)*(c*d-l*h)+(n*s-o*u)*(c*m-f*h)},t.multiply=r,t.translate=function(e,t,r){var n,o,a,i,u,s,c,f,l,p,h,m,d=r[0],v=r[1],y=r[2];t===e?(e[12]=t[0]*d+t[4]*v+t[8]*y+t[12],e[13]=t[1]*d+t[5]*v+t[9]*y+t[13],e[14]=t[2]*d+t[6]*v+t[10]*y+t[14],e[15]=t[3]*d+t[7]*v+t[11]*y+t[15]):(n=t[0],o=t[1],a=t[2],i=t[3],u=t[4],s=t[5],c=t[6],f=t[7],l=t[8],p=t[9],h=t[10],m=t[11],e[0]=n,e[1]=o,e[2]=a,e[3]=i,e[4]=u,e[5]=s,e[6]=c,e[7]=f,e[8]=l,e[9]=p,e[10]=h,e[11]=m,e[12]=n*d+u*v+l*y+t[12],e[13]=o*d+s*v+p*y+t[13],e[14]=a*d+c*v+h*y+t[14],e[15]=i*d+f*v+m*y+t[15]);return e},t.scale=function(e,t,r){var n=r[0],o=r[1],a=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*o,e[5]=t[5]*o,e[6]=t[6]*o,e[7]=t[7]*o,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.rotate=function(e,t,r,n){var o,a,i,u,s,c,f,l,p,h,m,d,v,y,b,E,g,_,A,T,x,P,R,M,F=n[0],w=n[1],O=n[2],I=Math.sqrt(F*F+w*w+O*O);if(I<B.EPSILON)return null;F*=I=1/I,w*=I,O*=I,o=Math.sin(r),a=Math.cos(r),i=1-a,u=t[0],s=t[1],c=t[2],f=t[3],l=t[4],p=t[5],h=t[6],m=t[7],d=t[8],v=t[9],y=t[10],b=t[11],E=F*F*i+a,g=w*F*i+O*o,_=O*F*i-w*o,A=F*w*i-O*o,T=w*w*i+a,x=O*w*i+F*o,P=F*O*i+w*o,R=w*O*i-F*o,M=O*O*i+a,e[0]=u*E+l*g+d*_,e[1]=s*E+p*g+v*_,e[2]=c*E+h*g+y*_,e[3]=f*E+m*g+b*_,e[4]=u*A+l*T+d*x,e[5]=s*A+p*T+v*x,e[6]=c*A+h*T+y*x,e[7]=f*A+m*T+b*x,e[8]=u*P+l*R+d*M,e[9]=s*P+p*R+v*M,e[10]=c*P+h*R+y*M,e[11]=f*P+m*R+b*M,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e},t.rotateX=function(e,t,r){var n=Math.sin(r),o=Math.cos(r),a=t[4],i=t[5],u=t[6],s=t[7],c=t[8],f=t[9],l=t[10],p=t[11];t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[4]=a*o+c*n,e[5]=i*o+f*n,e[6]=u*o+l*n,e[7]=s*o+p*n,e[8]=c*o-a*n,e[9]=f*o-i*n,e[10]=l*o-u*n,e[11]=p*o-s*n,e},t.rotateY=function(e,t,r){var n=Math.sin(r),o=Math.cos(r),a=t[0],i=t[1],u=t[2],s=t[3],c=t[8],f=t[9],l=t[10],p=t[11];t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=a*o-c*n,e[1]=i*o-f*n,e[2]=u*o-l*n,e[3]=s*o-p*n,e[8]=a*n+c*o,e[9]=i*n+f*o,e[10]=u*n+l*o,e[11]=s*n+p*o,e},t.rotateZ=function(e,t,r){var n=Math.sin(r),o=Math.cos(r),a=t[0],i=t[1],u=t[2],s=t[3],c=t[4],f=t[5],l=t[6],p=t[7];t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=a*o+c*n,e[1]=i*o+f*n,e[2]=u*o+l*n,e[3]=s*o+p*n,e[4]=c*o-a*n,e[5]=f*o-i*n,e[6]=l*o-u*n,e[7]=p*o-s*n,e},t.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},t.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromRotation=function(e,t,r){var n,o,a,i=r[0],u=r[1],s=r[2],c=Math.sqrt(i*i+u*u+s*s);if(c<B.EPSILON)return null;return i*=c=1/c,u*=c,s*=c,n=Math.sin(t),o=Math.cos(t),a=1-o,e[0]=i*i*a+o,e[1]=u*i*a+s*n,e[2]=s*i*a-u*n,e[3]=0,e[4]=i*u*a-s*n,e[5]=u*u*a+o,e[6]=s*u*a+i*n,e[7]=0,e[8]=i*s*a+u*n,e[9]=u*s*a-i*n,e[10]=s*s*a+o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromXRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromYRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromZRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromRotationTranslation=p,t.fromQuat2=function(e,t){var r=new B.ARRAY_TYPE(3),n=-t[0],o=-t[1],a=-t[2],i=t[3],u=t[4],s=t[5],c=t[6],f=t[7],l=n*n+o*o+a*a+i*i;0<l?(r[0]=2*(u*i+f*n+s*a-c*o)/l,r[1]=2*(s*i+f*o+c*n-u*a)/l,r[2]=2*(c*i+f*a+u*o-s*n)/l):(r[0]=2*(u*i+f*n+s*a-c*o),r[1]=2*(s*i+f*o+c*n-u*a),r[2]=2*(c*i+f*a+u*o-s*n));return p(e,t,r),e},t.getTranslation=function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},t.getScaling=function(e,t){var r=t[0],n=t[1],o=t[2],a=t[4],i=t[5],u=t[6],s=t[8],c=t[9],f=t[10];return e[0]=Math.sqrt(r*r+n*n+o*o),e[1]=Math.sqrt(a*a+i*i+u*u),e[2]=Math.sqrt(s*s+c*c+f*f),e},t.getRotation=function(e,t){var r=t[0]+t[5]+t[10],n=0;0<r?(n=2*Math.sqrt(r+1),e[3]=.25*n,e[0]=(t[6]-t[9])/n,e[1]=(t[8]-t[2])/n,e[2]=(t[1]-t[4])/n):t[0]>t[5]&&t[0]>t[10]?(n=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/n,e[0]=.25*n,e[1]=(t[1]+t[4])/n,e[2]=(t[8]+t[2])/n):t[5]>t[10]?(n=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/n,e[0]=(t[1]+t[4])/n,e[1]=.25*n,e[2]=(t[6]+t[9])/n):(n=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/n,e[0]=(t[8]+t[2])/n,e[1]=(t[6]+t[9])/n,e[2]=.25*n);return e},t.fromRotationTranslationScale=function(e,t,r,n){var o=t[0],a=t[1],i=t[2],u=t[3],s=o+o,c=a+a,f=i+i,l=o*s,p=o*c,h=o*f,m=a*c,d=a*f,v=i*f,y=u*s,b=u*c,E=u*f,g=n[0],_=n[1],A=n[2];return e[0]=(1-(m+v))*g,e[1]=(p+E)*g,e[2]=(h-b)*g,e[3]=0,e[4]=(p-E)*_,e[5]=(1-(l+v))*_,e[6]=(d+y)*_,e[7]=0,e[8]=(h+b)*A,e[9]=(d-y)*A,e[10]=(1-(l+m))*A,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e},t.fromRotationTranslationScaleOrigin=function(e,t,r,n,o){var a=t[0],i=t[1],u=t[2],s=t[3],c=a+a,f=i+i,l=u+u,p=a*c,h=a*f,m=a*l,d=i*f,v=i*l,y=u*l,b=s*c,E=s*f,g=s*l,_=n[0],A=n[1],T=n[2],x=o[0],P=o[1],R=o[2],M=(1-(d+y))*_,F=(h+g)*_,w=(m-E)*_,O=(h-g)*A,I=(1-(p+y))*A,S=(v+b)*A,U=(m+E)*T,B=(v-b)*T,C=(1-(p+d))*T;return e[0]=M,e[1]=F,e[2]=w,e[3]=0,e[4]=O,e[5]=I,e[6]=S,e[7]=0,e[8]=U,e[9]=B,e[10]=C,e[11]=0,e[12]=r[0]+x-(M*x+O*P+U*R),e[13]=r[1]+P-(F*x+I*P+B*R),e[14]=r[2]+R-(w*x+S*P+C*R),e[15]=1,e},t.fromQuat=function(e,t){var r=t[0],n=t[1],o=t[2],a=t[3],i=r+r,u=n+n,s=o+o,c=r*i,f=n*i,l=n*u,p=o*i,h=o*u,m=o*s,d=a*i,v=a*u,y=a*s;return e[0]=1-l-m,e[1]=f+y,e[2]=p-v,e[3]=0,e[4]=f-y,e[5]=1-c-m,e[6]=h+d,e[7]=0,e[8]=p+v,e[9]=h-d,e[10]=1-c-l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.frustum=function(e,t,r,n,o,a,i){var u=1/(r-t),s=1/(o-n),c=1/(a-i);return e[0]=2*a*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*s,e[6]=0,e[7]=0,e[8]=(r+t)*u,e[9]=(o+n)*s,e[10]=(i+a)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=i*a*2*c,e[15]=0,e},t.perspective=function(e,t,r,n,o){var a,i=1/Math.tan(t/2);e[0]=i/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=o&&o!==1/0?(a=1/(n-o),e[10]=(o+n)*a,e[14]=2*o*n*a):(e[10]=-1,e[14]=-2*n);return e},t.perspectiveFromFieldOfView=function(e,t,r,n){var o=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),i=Math.tan(t.leftDegrees*Math.PI/180),u=Math.tan(t.rightDegrees*Math.PI/180),s=2/(i+u),c=2/(o+a);return e[0]=s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(i-u)*s*.5,e[9]=(o-a)*c*.5,e[10]=n/(r-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*r/(r-n),e[15]=0,e},t.ortho=function(e,t,r,n,o,a,i){var u=1/(t-r),s=1/(n-o),c=1/(a-i);return e[0]=-2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+r)*u,e[13]=(o+n)*s,e[14]=(i+a)*c,e[15]=1,e},t.lookAt=function(e,t,r,n){var o,a,i,u,s,c,f,l,p,h,m=t[0],d=t[1],v=t[2],y=n[0],b=n[1],E=n[2],g=r[0],_=r[1],A=r[2];if(Math.abs(m-g)<B.EPSILON&&Math.abs(d-_)<B.EPSILON&&Math.abs(v-A)<B.EPSILON)return T(e);f=m-g,l=d-_,p=v-A,h=1/Math.sqrt(f*f+l*l+p*p),o=b*(p*=h)-E*(l*=h),a=E*(f*=h)-y*p,i=y*l-b*f,(h=Math.sqrt(o*o+a*a+i*i))?(o*=h=1/h,a*=h,i*=h):i=a=o=0;u=l*i-p*a,s=p*o-f*i,c=f*a-l*o,(h=Math.sqrt(u*u+s*s+c*c))?(u*=h=1/h,s*=h,c*=h):c=s=u=0;return e[0]=o,e[1]=u,e[2]=f,e[3]=0,e[4]=a,e[5]=s,e[6]=l,e[7]=0,e[8]=i,e[9]=c,e[10]=p,e[11]=0,e[12]=-(o*m+a*d+i*v),e[13]=-(u*m+s*d+c*v),e[14]=-(f*m+l*d+p*v),e[15]=1,e},t.targetTo=function(e,t,r,n){var o=t[0],a=t[1],i=t[2],u=n[0],s=n[1],c=n[2],f=o-r[0],l=a-r[1],p=i-r[2],h=f*f+l*l+p*p;0<h&&(h=1/Math.sqrt(h),f*=h,l*=h,p*=h);var m=s*p-c*l,d=c*f-u*p,v=u*l-s*f;0<(h=m*m+d*d+v*v)&&(h=1/Math.sqrt(h),m*=h,d*=h,v*=h);return e[0]=m,e[1]=d,e[2]=v,e[3]=0,e[4]=l*v-p*d,e[5]=p*m-f*v,e[6]=f*d-l*m,e[7]=0,e[8]=f,e[9]=l,e[10]=p,e[11]=0,e[12]=o,e[13]=a,e[14]=i,e[15]=1,e},t.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},t.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},t.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e},t.subtract=n,t.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e},t.multiplyScalarAndAdd=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e[6]=t[6]+r[6]*n,e[7]=t[7]+r[7]*n,e[8]=t[8]+r[8]*n,e[9]=t[9]+r[9]*n,e[10]=t[10]+r[10]*n,e[11]=t[11]+r[11]*n,e[12]=t[12]+r[12]*n,e[13]=t[13]+r[13]*n,e[14]=t[14]+r[14]*n,e[15]=t[15]+r[15]*n,e},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},t.equals=function(e,t){var r=e[0],n=e[1],o=e[2],a=e[3],i=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=e[9],p=e[10],h=e[11],m=e[12],d=e[13],v=e[14],y=e[15],b=t[0],E=t[1],g=t[2],_=t[3],A=t[4],T=t[5],x=t[6],P=t[7],R=t[8],M=t[9],F=t[10],w=t[11],O=t[12],I=t[13],S=t[14],U=t[15];return Math.abs(r-b)<=B.EPSILON*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(n-E)<=B.EPSILON*Math.max(1,Math.abs(n),Math.abs(E))&&Math.abs(o-g)<=B.EPSILON*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(a-_)<=B.EPSILON*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(i-A)<=B.EPSILON*Math.max(1,Math.abs(i),Math.abs(A))&&Math.abs(u-T)<=B.EPSILON*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(s-x)<=B.EPSILON*Math.max(1,Math.abs(s),Math.abs(x))&&Math.abs(c-P)<=B.EPSILON*Math.max(1,Math.abs(c),Math.abs(P))&&Math.abs(f-R)<=B.EPSILON*Math.max(1,Math.abs(f),Math.abs(R))&&Math.abs(l-M)<=B.EPSILON*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(p-F)<=B.EPSILON*Math.max(1,Math.abs(p),Math.abs(F))&&Math.abs(h-w)<=B.EPSILON*Math.max(1,Math.abs(h),Math.abs(w))&&Math.abs(m-O)<=B.EPSILON*Math.max(1,Math.abs(m),Math.abs(O))&&Math.abs(d-I)<=B.EPSILON*Math.max(1,Math.abs(d),Math.abs(I))&&Math.abs(v-S)<=B.EPSILON*Math.max(1,Math.abs(v),Math.abs(S))&&Math.abs(y-U)<=B.EPSILON*Math.max(1,Math.abs(y),Math.abs(U))},t.sub=t.mul=void 0;var B=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(h);function T(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function r(e,t,r){var n=t[0],o=t[1],a=t[2],i=t[3],u=t[4],s=t[5],c=t[6],f=t[7],l=t[8],p=t[9],h=t[10],m=t[11],d=t[12],v=t[13],y=t[14],b=t[15],E=r[0],g=r[1],_=r[2],A=r[3];return e[0]=E*n+g*u+_*l+A*d,e[1]=E*o+g*s+_*p+A*v,e[2]=E*a+g*c+_*h+A*y,e[3]=E*i+g*f+_*m+A*b,E=r[4],g=r[5],_=r[6],A=r[7],e[4]=E*n+g*u+_*l+A*d,e[5]=E*o+g*s+_*p+A*v,e[6]=E*a+g*c+_*h+A*y,e[7]=E*i+g*f+_*m+A*b,E=r[8],g=r[9],_=r[10],A=r[11],e[8]=E*n+g*u+_*l+A*d,e[9]=E*o+g*s+_*p+A*v,e[10]=E*a+g*c+_*h+A*y,e[11]=E*i+g*f+_*m+A*b,E=r[12],g=r[13],_=r[14],A=r[15],e[12]=E*n+g*u+_*l+A*d,e[13]=E*o+g*s+_*p+A*v,e[14]=E*a+g*c+_*h+A*y,e[15]=E*i+g*f+_*m+A*b,e}function p(e,t,r){var n=t[0],o=t[1],a=t[2],i=t[3],u=n+n,s=o+o,c=a+a,f=n*u,l=n*s,p=n*c,h=o*s,m=o*c,d=a*c,v=i*u,y=i*s,b=i*c;return e[0]=1-(h+d),e[1]=l+b,e[2]=p-y,e[3]=0,e[4]=l-b,e[5]=1-(f+d),e[6]=m+v,e[7]=0,e[8]=p+y,e[9]=m-v,e[10]=1-(f+h),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function n(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}var o=r;t.mul=o;var a=n;t.sub=a}),m=t(p);p.create,p.clone,p.copy,p.fromValues,p.set,p.identity,p.transpose,p.invert,p.adjoint,p.determinant,p.multiply,p.translate,p.scale,p.rotate,p.rotateX,p.rotateY,p.rotateZ,p.fromTranslation,p.fromScaling,p.fromRotation,p.fromXRotation,p.fromYRotation,p.fromZRotation,p.fromRotationTranslation,p.fromQuat2,p.getTranslation,p.getScaling,p.getRotation,p.fromRotationTranslationScale,p.fromRotationTranslationScaleOrigin,p.fromQuat,p.frustum,p.perspective,p.perspectiveFromFieldOfView,p.ortho,p.lookAt,p.targetTo,p.str,p.frob,p.add,p.subtract,p.multiplyScalar,p.multiplyScalarAndAdd,p.exactEquals,p.equals,p.sub,p.mul;function w(e,t){var r=t.axesScale;this.model=m.create(),m.fromScaling(this.model,[r,r,r]),this.projection=t.projection}function v(e,r){var n=this;void 0===r&&(r="control_"),Object.assign(this,this,e),Object.keys(e).forEach(function(t){var e=document.getElementById(r+t);e&&("range"===e.type?(e.addEventListener("input",function(e){n[t]=Number(e.target.previousElementSibling.lastChild.innerText=e.target.value)}),e.addEventListener("dblclick",function(e){e.target.value=0,e.target.dispatchEvent(new Event("input"))}),e.dispatchEvent(new Event("input"))):(e.addEventListener("change",function(e){n[t]=e.target.checked}),e.dispatchEvent(new Event("change"))))})}function O(){var e=new o(9);return o!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}w.prototype.draw=function(e,t){var r=m.create();m.multiply(r,t,this.model);var n=y.createProgramInfo(e,["vs-a","fs-a"]);e.useProgram(n.program),y.setUniforms(n,{u_worldView:r,u_projection:this.projection}),y.setBuffersAndAttributes(e,n,y.createBufferInfoFromArrays(e,this.axesVerts)),e.drawArrays(e.LINES,0,6),y.setBuffersAndAttributes(e,n,y.createBufferInfoFromArrays(e,this.axesDots)),e.drawArrays(e.POINTS,0,3)},w.prototype.axesVerts={position:[-1,0,0,1,0,0,0,-1,0,0,1,0,0,0,-1,0,0,1],color:[.86,.207,.27,1,.86,.207,.27,1,.156,.652,.27,1,.156,.652,.27,1,0,.48,1,1,0,.48,1,1]},w.prototype.axesDots={position:[1,0,0,0,1,0,0,0,1],color:[.86,.207,.27,1,.156,.652,.27,1,0,.48,1,1]};var I;I=function(){var e=new o(4);return o!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}();function S(){var e=new o(4);return o!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function U(e,t,r,n){var o,a,i,u,s,c=t[0],f=t[1],l=t[2],p=t[3],h=r[0],m=r[1],d=r[2],v=r[3];return(a=c*h+f*m+l*d+p*v)<0&&(a=-a,h=-h,m=-m,d=-d,v=-v),s=T<1-a?(o=Math.acos(a),i=Math.sin(o),u=Math.sin((1-n)*o)/i,Math.sin(n*o)/i):(u=1-n,n),e[0]=u*c+s*h,e[1]=u*f+s*m,e[2]=u*l+s*d,e[3]=u*p+s*v,e}var B,C,j,L,N,D,z,k=function(e,t){var r=t[0],n=t[1],o=t[2],a=t[3],i=r*r+n*n+o*o+a*a;return 0<i&&(i=1/Math.sqrt(i)),e[0]=r*i,e[1]=n*i,e[2]=o*i,e[3]=a*i,e},G=(B=g(),C=A(1,0,0),j=A(0,1,0),function(e,t,r){var n=s(t,r);return n<-.999999?(c(B,C,t),f(B)<1e-6&&c(B,j,t),i(B,B),function(e,t,r){r*=.5;var n=Math.sin(r);e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Math.cos(r)}(e,B,Math.PI),e):.999999<n?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(c(B,t,r),e[0]=B[0],e[1]=B[1],e[2]=B[2],e[3]=1+n,k(e,e))});L=S(),N=S(),D=O();function X(e,t,r,n){this.programInfo=r.program,this.bufferInfo=n.verts,this.position=e,this.course=t,this.acceleration=g(),this.uniforms={u_normal:O(),u_worldView:b(),u_projection:r.projection,u_color:n.color,u_reverseLightDirection:r.revLightDir,u_ambientColor:r.ambientColor,u_fogColor:r.backgroundColor},this.model=b(),this.perching=0,this.birdSettings=n}function V(e,t,r){X.call(this,e,t,r,r.sijs),this.settings=r}function Y(e){var t=g();R(t,1),X.call(this,A(2e3,-2e3,0),t,e,e.predator)}function W(e){this.values=[],this.sum=0,this.nValues=e}function K(e,t,r,n,o){this.view=e,this.tick=t,this.render=r,this.controls=n,this.indicators=o,this.reportPeriod=500,this.avg=new W(10),this.prevTime=0,this.prevReport=0}function q(e,t,r){var n=document.createElement("script");n.setAttribute("id",e),n.setAttribute("type",t),n.innerHTML=r,document.head.appendChild(n)}function H(e){var t=this;void 0===e&&(e=250),this.remove=!1,this.add=!1,this.tempo=e,this.counter=e,this.removePending=!1,this.addPending=!1;var r=document.getElementById("btn-minus"),n=document.getElementById("btn-plus");r&&r.addEventListener("mousedown",function(){t.removePending=!0}),n&&n.addEventListener("mousedown",function(){t.addPending=!0}),document.addEventListener("mouseup",function(){t.removePending=t.addPending=!1})}function Z(e){return z||(z=y.createBufferInfoFromArrays(e,{position:[-1,0,-1,0,-1,0,0,1,0,-1,0,1,0,1,0,0,-1,0,0,-1,0,-1,0,-1,1,0,0,-1,0,1,0,-1,0,1,0,0,0,1,0,-1,0,1,1,0,0,-1,0,-1,0,1,0,1,0,0],normal:[-.707,0,.707,-.707,0,.707,-.707,0,.707,-.707,0,-.707,-.707,0,-.707,-.707,0,-.707,.408,-.408,-.816,.408,-.408,-.816,.408,-.408,-.816,.408,-.408,.816,.408,-.408,.816,.408,-.408,.816,.408,.408,.816,.408,.408,.816,.408,.408,.816,.408,.408,-.816,.408,.408,-.816,.408,.408,-.816]})),z}X.prototype.updateModel=function(){var e=g();i(e,this.course);var t=S();return G(t,this.birdSettings.face,e),function(e,t,r,n){var o=t[0],a=t[1],i=t[2],u=t[3],s=o+o,c=a+a,f=i+i,l=o*s,p=o*c,h=o*f,m=a*c,d=a*f,v=i*f,y=u*s,b=u*c,E=u*f,g=n[0],_=n[1],A=n[2];e[0]=(1-(m+v))*g,e[1]=(p+E)*g,e[2]=(h-b)*g,e[3]=0,e[4]=(p-E)*_,e[5]=(1-(l+v))*_,e[6]=(d+y)*_,e[7]=0,e[8]=(h+b)*A,e[9]=(d-y)*A,e[10]=(1-(l+m))*A,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1}(this.model,t,this.position,this.birdSettings.scale),function(e,t){var r=t[0],n=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=t[6],c=t[7],f=t[8],l=t[9],p=t[10],h=t[11],m=t[12],d=t[13],v=t[14],y=t[15],b=r*u-n*i,E=r*s-o*i,g=r*c-a*i,_=n*s-o*u,A=n*c-a*u,T=o*c-a*s,x=f*d-l*m,P=f*v-p*m,R=f*y-h*m,M=l*v-p*d,F=l*y-h*d,w=p*y-h*v,O=b*w-E*F+g*M+_*R-A*P+T*x;O&&(O=1/O,e[0]=(u*w-s*F+c*M)*O,e[1]=(s*R-i*w-c*P)*O,e[2]=(i*F-u*R+c*x)*O,e[3]=(o*F-n*w-a*M)*O,e[4]=(r*w-o*R+a*P)*O,e[5]=(n*R-r*F-a*x)*O,e[6]=(d*T-v*A+y*_)*O,e[7]=(v*g-m*T-y*E)*O,e[8]=(m*A-d*g+y*b)*O)}(this.uniforms.u_normal,this.model),this},X.prototype.update=function(e){if(!this.perching){var t=g();P(t,this.course,e),x(this.position,this.position,t),this.updateModel()}return this},X.prototype.project=function(e){return function(e,t,r){var n=t[0],o=t[1],a=t[2],i=t[3],u=t[4],s=t[5],c=t[6],f=t[7],l=t[8],p=t[9],h=t[10],m=t[11],d=t[12],v=t[13],y=t[14],b=t[15],E=r[0],g=r[1],_=r[2],A=r[3];e[0]=E*n+g*u+_*l+A*d,e[1]=E*o+g*s+_*p+A*v,e[2]=E*a+g*c+_*h+A*y,e[3]=E*i+g*f+_*m+A*b,E=r[4],g=r[5],_=r[6],A=r[7],e[4]=E*n+g*u+_*l+A*d,e[5]=E*o+g*s+_*p+A*v,e[6]=E*a+g*c+_*h+A*y,e[7]=E*i+g*f+_*m+A*b,E=r[8],g=r[9],_=r[10],A=r[11],e[8]=E*n+g*u+_*l+A*d,e[9]=E*o+g*s+_*p+A*v,e[10]=E*a+g*c+_*h+A*y,e[11]=E*i+g*f+_*m+A*b,E=r[12],g=r[13],_=r[14],A=r[15],e[12]=E*n+g*u+_*l+A*d,e[13]=E*o+g*s+_*p+A*v,e[14]=E*a+g*c+_*h+A*y,e[15]=E*i+g*f+_*m+A*b}(this.uniforms.u_worldView,e,this.model),this},X.prototype.sees=function(e,t){if(this===e)return!1;var r=g();return u(r,e.position,this.position),function(e,t){var r=A(e[0],e[1],e[2]),n=A(t[0],t[1],t[2]);i(r,r),i(n,n);var o=s(r,n);return 1<o?0:o<-1?Math.PI:Math.acos(o)}(r,this.course)<=t},X.prototype.seek=function(e,t){var r=g();return u(r,e,this.position),i(r,r),P(r,r,t),x(this.acceleration,this.acceleration,r),this},X.prototype.flee=function(e,t){var r=g();return u(r,this.position,e),i(r,r),P(r,r,t),x(this.acceleration,this.acceleration,r),this},X.prototype.perch=function(e,t){return void 0===t&&(t=0),0<this.perching?this.perching--:this.position[1]<t&&(this.position[1]=t,this.perching=Math.floor(e*Math.random()),this.course[1]<0&&(this.course[1]=-this.course[1])),this},X.prototype.root=function(e){if(!this.perching&&function(e){var t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n}(this.position)>=this.birdSettings.limit2){var t=g();R(t,this.birdSettings.limit/1.5),this.seek(t,e)}return this},X.prototype.noise=function(e){if(!this.perching&&0<e&&Math.random()<e){var t=g();R(t,e),x(this.acceleration,this.acceleration,t)}return this},X.prototype.boundVec=function(e,t){var r=_(e);return t<r&&P(e,e,t/r),e},X.prototype.bounds=function(e,t){return this.perching||(this.acceleration=this.boundVec(this.acceleration,e),x(this.course,this.course,this.acceleration),this.course=this.boundVec(this.course,t)),this},X.prototype.separate=function(e,t){var a=this;void 0===t&&(t=1);var i=3*this.birdSettings.size,r=g();return e.reduce(function(e,t){var r=t[0],n=t[1];if(n<i){var o=g();return u(o,a.position,r.position),P(o,o,1/n),x(e,e,o)}return e},r),P(r,r,t/e.length),x(this.acceleration,this.acceleration,r),this},X.prototype.align=function(e,t){void 0===t&&(t=1);var r=g();return e.reduce(function(e,t){return x(e,e,t[0].course)},r),P(r,r,t/e.length),x(this.acceleration,this.acceleration,r),this},X.prototype.cohese=function(e,t){var r=g();return e.reduce(function(e,t){return x(e,e,t[0].position)},r),P(r,r,1/e.length),this.seek(r,t)},Object.defineProperties(X.prototype,{x:{get:function(){return this.position[0]},enumerable:!0},y:{get:function(){return this.position[1]},enumerable:!0},z:{get:function(){return this.position[2]},enumerable:!0}}),V.prototype=Object.create(X.prototype),Object.defineProperty(V.prototype,"constructor",{value:V,enumerable:!1,writable:!0}),V.prototype.hilight=function(e,t){this.uniforms.u_color=t?this.settings.hilightColor:this.settings.sijs.color;var r=t?this.settings.neighbourColor:this.settings.sijs.color;return e.forEach(function(e){e[0].uniforms.u_color=r}),this},Y.prototype=Object.create(X.prototype),Object.defineProperty(Y.prototype,"constructor",{value:Y,enumerable:!1,writable:!0}),W.prototype.avg=function(e){return this.values.push(e),this.sum+=e,this.values.length>this.nValues&&(this.sum-=this.values.shift()),this.sum/this.values.length},K.prototype.calcDelta=function(e){if(this.prevTime){var t=e-this.prevTime;if(this.prevTime=e,100<t)return 0;var r=this.avg.avg(t);return e>this.prevReport+this.reportPeriod&&(this.prevReport=e,this.indicators.fps=(1e3/r).toFixed(1)),t}return this.prevTime=this.prevReport=e,0},K.prototype.loop=function(e){var t=this.calcDelta(e),r=this.view();t&&!this.controls.freeze&&this.tick(t),this.render(r),requestAnimationFrame(this.loop.bind(this))},K.prototype.run=function(){requestAnimationFrame(this.loop.bind(this))},H.prototype.update=function(e){this.counter-=e,this.counter<0?(this.counter=this.tempo,this.remove=this.removePending,this.add=this.addPending):this.remove=this.add=!1};var Q={hilightColor:[.5,1,0,1],neighbourColor:[0,.8,.82,1],revLightDir:[.5,.7,1],ambientColor:[.42,.42,.42],zoom:Math.PI/3,backgroundColor:[1,1,1,1],axesScale:150,nodeSearch:24,perchingLevel:-500,nSijsFactor:.2,sijs:{size:24,face:[1,0,0],limit:1e3,color:[.55,.27,.07,1]},predator:{size:48,face:[1,0,0],limit:2e3,color:[1,0,0,1]},controls:{vision:360,v_angle:140,max_accel:.48,max_speed:.48,noise:.07,root_strength:.02,perching:120,align:.11,cohesion:.005,separation:.42,cam_angle:30,cam_dist:1500,cam_height:400,axes:!1,hilight:!1,freeze:!1,slomo:!1,pov:!1}};var J,$={},ee=new function(e,r){var n=this;void 0===r&&(r="msg_");var o=this;this.elements={},e.forEach(function(t){var e=document.getElementById(r+t);e&&(n.elements[t]=e,Object.defineProperty(n,t,{set:function(e){o.elements[t].innerHTML=e},enumerable:!0,configurable:!0}))})}(["fps","version","nsijssies","neighbours"]);return e.App=function(n){var s,c,f=g(),o=A(0,1,0),l=new H,r=new w(n,$),p=[],h=[];y.resizeCanvasToDisplaySize(n.canvas);for(var e=Math.floor($.nSijsFactor*Math.hypot(n.canvas.width,n.canvas.height)),t=0;t<e;t++){var a=g(),i=g();R(a,$.sijs.limit/1.5),R(i,J.max_speed);var u=new V(a,i,$);0===t&&(s=u),p.push(u)}function m(e,t){return Math.hypot(e.x-t.x,e.y-t.y,e.z-t.z)}var d=!1!==$.predator&&new Y($),v=0;new K(function(){y.resizeCanvasToDisplaySize(n.canvas),n.viewport(0,0,n.canvas.width,n.canvas.height),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT);var e=b();if(J.pov&&s){var t=g();x(t,s.position,s.course),E(e,s.position,t,o)}else{var r=A(0,J.cam_height,J.cam_dist);M(r,r,g(),Math.PI*J.cam_angle/180),E(e,r,f,o)}return e},function(t){if(ee.nsijssies=p.length,l.update(t),J.slomo&&(t/=5),l.remove){var e=p.pop();e&&h.push(e),e===s&&(s=0<p.length?p[0]:null)}if(l.add){var r=A(0,J.cam_height,2e3);M(r,r,f,Math.PI*(J.cam_angle+.5)/180);var n=new V(r,f,$);n.seek(f,.1),0===p.length&&(s=n),p.push(n)}var o=new F(p,m,["x","y","z"]),a=0,i=g();p.forEach(function(t){x(i,i,t.position);var e=o.nearest(t,$.nodeSearch,J.vision).filter(function(e){return t.sees(e[0],Math.PI*J.v_angle/360)});a+=e.length,t===s&&(c=e),0<e.length&&t.separate(e,J.separation).align(e,J.align).cohese(e,J.cohesion),t.perch(J.perching,$.perchingLevel).root(J.root_strength).noise(J.noise).bounds(J.max_accel,J.max_speed),d&&t.sees(d,J.v_angle)&&t.flee(d.position,.01)}),P(i,i,1/p.length),500<(v+=t)&&(v=0,ee.neighbours=0<p.length?(a/p.length).toFixed(1):0);var u=A(0,J.cam_height,2400);M(u,u,f,Math.PI*(J.cam_angle-.5)/180),h=h.filter(function(e){return!(2e3<_(e.position))&&(e.noise(.05).seek(u,.1).bounds(.5,.5),!0)}),d&&d.root(.01).noise(.08).bounds(1,1).update(t),p.forEach(function(e){e.update(t)}),h.forEach(function(e){e.update(t)})},function(t){d&&d.project(t),p.forEach(function(e){e.project(t)}),h.forEach(function(e){e.project(t)});var e=J.hilight;e&&s.hilight(c,!0),d&&y.drawObjectList(n,[d]),0<p.length&&y.drawObjectList(n,p),0<h.length&&y.drawObjectList(n,h),e&&s.hilight(c,!1),J.axes&&r.draw(n,t)},J,ee).run()},e.fly=function(e,t){q("vs-u","x-shader/x-vertex","attribute vec4 a_position;\nattribute vec3 a_normal;\n\nuniform mat4 u_worldView;\nuniform mat4 u_projection;\nuniform vec4 u_color;\n\nvarying vec3 v_position;\nvarying vec3 v_normal;\nvarying vec4 v_color;\n\nvoid main() {\n  gl_Position = u_projection * u_worldView * a_position;\n\n  v_normal = normalize(a_normal);\n  v_color = u_color;\n  v_position = (u_worldView * a_position).xyz;\n}"),q("fs-u","x-shader/x-fragment","#ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n#else\n    precision mediump float;\n#endif\n\nuniform vec3 u_reverseLightDirection;\nuniform vec3 u_ambientColor;\nuniform mat3 u_normal;\nuniform vec4 u_fogColor;\n// uniform float u_fogNear;\n// uniform float u_fogFar;\n\nvarying vec3 v_position;\nvarying vec3 v_normal;\nvarying vec4 v_color;\n\nvoid main() {\n   // because v_normal is a varying it's interpolated\n   // it will not be a uint vector. Normalizing it\n   // will make it a unit vector again\n   vec3 normal = normalize(u_normal * v_normal);\n\n   float light = dot(normal, u_reverseLightDirection);\n \n   float fogDistance = length(v_position);\n   float fogAmount = smoothstep(2000.0, 6000.0, fogDistance);\n\n   gl_FragColor = mix(v_color, u_fogColor, fogAmount);  \n\n   // Multiply just the color portion (not the alpha)\n   // by the light\n   gl_FragColor.rgb *= light;\n   gl_FragColor.rgb += u_ambientColor;\n}"),q("vs-a","x-shader/x-vertex","attribute vec4 a_position;\nattribute vec4 a_color;\n\nuniform mat4 u_worldView;\nuniform mat4 u_projection;\n\nvarying vec4 v_color;\n\nvoid main() {\n  gl_PointSize = 4.0;\n  gl_Position = u_projection * u_worldView * a_position;\n  v_color = a_color;\n}"),q("fs-a","x-shader/x-fragment","#ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n#else\n    precision mediump float;\n#endif\n\nvarying vec4 v_color;\n\nvoid main() {\n   gl_FragColor = v_color;\n}");var r=document.getElementById(e),n=y.getContext(r,{alpha:!1});if(n){Object.assign($,Q,t),J=new v($.controls),y.setDefaults({attribPrefix:"a_"}),i($.revLightDir,$.revLightDir),$.sijs.scale=A($.sijs.size,.3*$.sijs.size,.6*$.sijs.size),$.sijs.limit2=$.sijs.limit*$.sijs.limit,$.sijs.verts=Z(n),$.predator&&($.predator.scale=A($.predator.size,.3*$.predator.size,.6*$.predator.size),$.predator.limit2=$.predator.limit*$.predator.limit,$.predator.verts=Z(n)),$.program=y.createProgramInfo(n,["vs-u","fs-u"]);var o=n.canvas.clientWidth/n.canvas.clientHeight,a=b();return function(e,t,r,n,o){var a,i=1/Math.tan(t/2);e[0]=i/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=o&&o!==1/0?(a=1/(n-o),e[10]=(o+n)*a,e[14]=2*o*n*a):(e[10]=-1,e[14]=-2*n)}(a,$.zoom,o,$.sijs.size,null),$.projection=a,ee.version=n.getParameter(n.VERSION),n.clearColor.apply(n,$.backgroundColor),n.enable(n.DEPTH_TEST),n.enable(n.CULL_FACE),new this.App(n)}return r.innerText="Browser doesn't support WebGL",null},e.version="0.9.0",e}({});
//# sourceMappingURL=sijssies.js.map
